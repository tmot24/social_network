(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[0],{112:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var r=n(7),a=n(86),s=n(98),c=n.n(s),i=n(25),o=n(142),l=n(186),u=n(61),j=n(2),d=function(e){var t=e.sendMessage,n=e.maxLength,s=Object(a.a)(),i=s.register,o=s.handleSubmit,l=s.formState.errors;return Object(j.jsx)("form",{onSubmit:o((function(e){t(e.newMessageBody)})),children:Object(j.jsxs)("div",{className:c.a.formControl,children:[Object(j.jsx)("div",{children:Object(j.jsx)("textarea",Object(r.a)({className:l.newMessageBody?c.a.error:"",type:"text",placeholder:"Enter your message"},i("newMessageBody",{required:"Field is required",maxLength:{value:n,message:"Max length is ".concat(n," symbols")}})))}),l.newMessageBody&&Object(j.jsx)("span",{children:l.newMessageBody.message}),Object(j.jsx)("input",{type:"submit",value:"Send"})]})})},b=function(e){var t=e.sendMessage;return Object(j.jsx)(i.c,{initialValues:{input:""},onSubmit:function(e){return t(e.input)},children:function(e){var t=e.submitForm,n=e.isSubmitting;return Object(j.jsx)(i.b,{children:Object(j.jsxs)(o.a,{children:[Object(j.jsx)(i.a,{component:u.b,name:"input",label:"Add new post",helperText:"Enter your message",style:{width:250}}),Object(j.jsx)(o.a,{style:{display:"flex",justifyContent:"flex-end"},children:Object(j.jsx)(l.a,{onClick:t,disabled:n,children:"Send"})})]})})}})}},113:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var r=n(18),a=n(7),s=n(30),c="SEND_MESSAGE",i={dataDialog:[{id:1,name:"Dimych",img:s.a},{id:2,name:"Andrey",img:s.a},{id:3,name:"Sveta",img:s.a},{id:4,name:"Sasha",img:s.a},{id:5,name:"Victor",img:s.a},{id:6,name:"Valera",img:s.a}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you?"},{id:3,message:"Yo"},{id:4,message:"Yo"},{id:5,message:"Yo"}]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n=t.newMessageBody;return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:6,message:n}])});default:return e}},l=function(e){return{type:c,newMessageBody:e}}},182:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(12),c=n.n(s),i=n(15),o=n(17),l=n(218),u=n(233),j=n(234),d=n(221),b=n(62),f=n(186),p=n(128),O=n.n(p),h=n(39),g=n(7),x=n(4),m=n(26),v=n(244),w=n(222),y=n(223),k=n(224),C=n(225),S=n(226),P=n(119),_=n.n(P),I=n(118),M=n.n(I),E=n(120),F=n.n(E),N=n(121),U=n.n(N),A=n(122),T=n.n(A),L=n(2),D=Object(l.a)((function(e){return{drawer:{width:Ie,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:Ie,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},toolbar:Object(g.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)}})),z=function(e){var t,n,r=e.handleDrawerClose,a=e.open,s=Object(m.a)(),c=D(s),i=Object(o.g)();return Object(L.jsxs)(v.a,{variant:"permanent",className:Object(x.a)(c.drawer,(t={},Object(h.a)(t,c.drawerOpen,a),Object(h.a)(t,c.drawerClose,!a),t)),classes:{paper:Object(x.a)((n={},Object(h.a)(n,c.drawerOpen,a),Object(h.a)(n,c.drawerClose,!a),n))},children:[Object(L.jsx)("div",{className:c.toolbar,children:Object(L.jsx)(d.a,{onClick:r,children:"rtl"===s.direction?Object(L.jsx)(M.a,{}):Object(L.jsx)(_.a,{})})}),Object(L.jsx)(w.a,{}),Object(L.jsxs)(y.a,{children:[Object(L.jsxs)(k.a,{button:!0,onClick:function(){return i.push("/profile")},children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(F.a,{})}),Object(L.jsx)(S.a,{primary:"Profile"})]}),Object(L.jsxs)(k.a,{button:!0,onClick:function(){return i.push("/dialogs")},children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(U.a,{})}),Object(L.jsx)(S.a,{primary:"Dialogs"})]}),Object(L.jsxs)(k.a,{button:!0,onClick:function(){return i.push("/users")},children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(T.a,{})}),Object(L.jsx)(S.a,{primary:"Users"})]})]})]})},R=n(129),B=n.n(R),G=n(127),J=n.n(G),W=n(24),V=n(9),H=n.n(V),q=n(14),Y=n(124),Z=n.n(Y).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"b45f20e6-c418-486d-bf45-21bf8191b135"}}),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Z.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},K=function(e){return Z.post("follow/".concat(e))},$=function(e){return Z.delete("follow/".concat(e))},Q=function(e){return Z.get("profile/".concat(e))},ee=function(e){return Z.get("profile/status/".concat(e))},te=function(e){return Z.put("profile/status",{status:e})},ne=function(e){var t=new FormData;return t.append("image",e),Z.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},re=function(e){return Z.put("profile",e)},ae=function(){return Z.get("auth/me")},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Z.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},ce=function(){return Z.delete("auth/login")},ie=function(){return Z.get("security/get-captcha-url")},oe="auth/SET_USER_DATA",le="auth/SET_ERROR_LOGIN",ue="auth/GET_CAPTCHA_URL_SUCCESS",je={id:null,email:null,login:null,isAuth:!1,errorMessage:null,captchaUrl:null},de=function(e){return{type:ue,payload:{captchaUrl:e}}},be=function(e){return{type:le,errorMessage:e}},fe=function(e,t,n,r){return{type:oe,payload:{userId:e,email:t,login:n,isAuth:r}}},pe=function(){return function(){var e=Object(q.a)(H.a.mark((function e(t){var n,r,a,s,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,a=r.id,s=r.login,c=r.email,t(fe(a,c,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Oe=function(){return function(){var e=Object(q.a)(H.a.mark((function e(t){var n,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:n=e.sent,r=n.data.url,t(de(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},he=n(228),ge=n(229),xe=n(230),me=n(231),ve=n(142),we=n(227),ye=n(232),ke=n(25),Ce=n(61),Se=function(e){var t=e.errorMessage,n=e.login,a=e.captchaUrl,s=Object(r.useState)(!1),c=Object(i.a)(s,2),o=c[0],l=c[1],u=function(){l(!1)};return Object(L.jsxs)("div",{children:[Object(L.jsx)(f.a,{variant:"outlined",color:"secondary",onClick:function(){l(!0)},children:"Login"}),Object(L.jsxs)(he.a,{open:o,onClose:u,"aria-labelledby":"form-dialog-title",children:[Object(L.jsx)(ge.a,{id:"form-dialog-title",children:"Login"}),Object(L.jsxs)(xe.a,{children:[Object(L.jsxs)(me.a,{children:[Object(L.jsx)(b.a,{variant:"subtitle1",children:"Please use test email: "}),Object(L.jsx)(b.a,{variant:"h4",children:"free@samuraijs.com"}),Object(L.jsx)(b.a,{variant:"subtitle1",children:"Please use test password: "}),Object(L.jsx)(b.a,{variant:"h4",children:"free"})]}),Object(L.jsx)(ke.c,{initialValues:{email:"free@samuraijs.com",password:"free"},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(e){var t;n((t=e).email,t.password,t.rememberMe,t.captcha)},children:function(e){var n=e.submitForm;return Object(L.jsxs)(ke.b,{children:[Object(L.jsx)(ve.a,{margin:1,children:Object(L.jsx)(ke.a,{component:Ce.b,name:"email",type:"email",label:"Email",helperText:"email"})}),Object(L.jsx)(ve.a,{margin:1,children:Object(L.jsx)(ke.a,{component:Ce.b,type:"password",label:"Password",name:"password"})}),Object(L.jsx)(ve.a,{margin:1,children:Object(L.jsx)(we.a,{control:Object(L.jsx)(ke.a,{component:Ce.a,type:"checkbox",name:"rememberMe"}),label:"Remember me"})}),Object(L.jsxs)(ve.a,{margin:1,children:[a&&Object(L.jsx)("img",{style:{display:"inherit"},src:a,alt:"captcha"}),a&&Object(L.jsx)(ke.a,{component:Ce.b,type:"captcha",label:"Captcha",name:"captcha"}),t&&Object(L.jsx)(ve.a,{margin:2,children:Object(L.jsx)(b.a,{variant:"subtitle1",style:{color:"red",backgroundColor:"white"},children:t})})]}),Object(L.jsxs)(ye.a,{children:[Object(L.jsx)(f.a,{onClick:u,children:"Cancel"}),Object(L.jsx)(f.a,{onClick:n,children:"Login"})]})]})}})]})]})]})},Pe={login:function(e,t,n,r){return function(){var a=Object(q.a)(H.a.mark((function a(s){var c;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,se(e,t,n,r);case 2:0===(c=a.sent).data.resultCode?s(pe()):(10===c.data.resultCode&&s(Oe()),s(be(c.data.messages[0])));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},setErrorLogin:be},_e=Object(W.b)((function(e){return{isAuth:e.auth.isAuth,errorMessage:e.auth.errorMessage,captchaUrl:e.auth.captchaUrl}}),Pe)((function(e){var t=e.isAuth,n=e.login,r=e.errorMessage,a=e.captchaUrl;return t?Object(L.jsx)(o.a,{to:"profile"}):Object(L.jsx)(Se,{errorMessage:r,login:n,captchaUrl:a})})),Ie=200,Me=Object(l.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:36},hide:{display:"none"},toolbar:{justifyContent:"space-between"},title:{marginLeft:20},login:{display:"flex",alignItems:"center"},empty:{flexGrow:1},name:{marginRight:12}}})),Ee=function(e){var t=e.isAuth,n=e.login,a=e.logout,s=e.darkMode,c=e.setDarkMode,o=Me(),l=Object(r.useState)(!1),p=Object(i.a)(l,2),h=p[0],g=p[1],x=function(){g(!1)};return Object(L.jsxs)("div",{className:o.root,children:[Object(L.jsx)(u.a,{position:"fixed",className:o.appBar,children:Object(L.jsxs)(j.a,{className:o.toolbar,children:[h?Object(L.jsx)(d.a,{onClick:x,color:"inherit",edge:"start",children:Object(L.jsx)(J.a,{})}):Object(L.jsx)(d.a,{color:"inherit",onClick:function(){g(!0)},edge:"start",children:Object(L.jsx)(O.a,{})}),Object(L.jsx)(b.a,{variant:"h6",noWrap:!0,className:o.title,children:"Social network"}),Object(L.jsx)("div",{className:o.empty}),Object(L.jsxs)("div",{className:o.login,children:[Object(L.jsx)(d.a,{color:"secondary",onClick:function(){return c(!s)},children:Object(L.jsx)(B.a,{})}),Object(L.jsx)("div",{children:t?Object(L.jsxs)("div",{className:o.login,children:[Object(L.jsx)(b.a,{className:o.name,variant:"h6",children:n}),Object(L.jsx)(f.a,{color:"secondary",variant:"outlined",onClick:a,children:"Log out"})]}):Object(L.jsx)(_e,{})})]})]})}),Object(L.jsx)(z,{open:h,handleDrawerClose:x})]})},Fe={logout:function(){return function(){var e=Object(q.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:0===e.sent.data.resultCode&&t(fe(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Ne=Object(W.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),Fe)((function(e){var t=e.isAuth,n=e.login,r=e.logout,a=e.darkMode,s=e.setDarkMode;return Object(L.jsx)(Ee,{isAuth:t,login:n,logout:r,darkMode:a,setDarkMode:s})})),Ue="INITIALIZED_SUCCESS",Ae={initialized:!1},Te=n(235),Le=function(){var e=Object(m.a)();return Object(L.jsx)(Te.a,{style:{backgroundColor:"#303030",marginBottom:e.spacing(2)}})},De=n.p+"static/media/welcome-home-welcome-home-de.842af542.jpg",ze=Object(l.a)({root:{height:"80vh"}}),Re=function(){var e=ze();return Object(L.jsx)("div",{children:Object(L.jsx)("img",{className:e.root,src:De,alt:"welcome"})})},Be=function(){return Object(L.jsx)("div",{children:"Not Found"})},Ge=n(67),Je=n(68),We=n(138),Ve=n(137),He=function(e){Object(We.a)(n,e);var t=Object(Ve.a)(n);function n(){var e;Object(Ge.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return Object(Je.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0}),console.log(t)}},{key:"render",value:function(){return this.state.error?Object(L.jsx)("img",{src:"https://miro.medium.com/max/700/1*v4dLIlWpJkCiSDKv7xguLA.png",alt:"error"}):this.props.children}}]),n}(a.a.Component),qe=n(242),Ye=n(243),Ze=n(238),Xe=n(136),Ke=n(60),$e=n.n(Ke),Qe=function(e){var t=e.profile,n=e.status,a=e.updateUserStatus,s=e.isOwner,c=Object(r.useState)(!1),o=Object(i.a)(c,2),l=o[0],u=o[1],j=Object(r.useState)(),d=Object(i.a)(j,2),b=d[0],f=d[1];Object(r.useEffect)((function(){f(n)}),[n]);return t?Object(L.jsx)("div",{children:l?Object(L.jsx)("div",{children:Object(L.jsx)("input",{onChange:function(e){f(e.currentTarget.value)},autoFocus:!0,onBlur:function(){return u(!1),void a(b)},type:"text",defaultValue:b})}):Object(L.jsx)("div",{children:Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Status: "}),Object(L.jsx)("span",{onDoubleClick:s?function(){u(!0)}:null,children:b||"No status"})]})})}):Object(L.jsx)(Le,{})},et=n(30),tt=n(86),nt=function(e){var t=e.profile,n=e.saveProfile,a=e.setEditMode,s=Object(r.useState)([]),c=Object(i.a)(s,2),o=c[0],l=c[1],u=Object(tt.a)({defaultValues:{fullName:t.fullName,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,aboutMe:t.aboutMe,contacts:{facebook:t.contacts.facebook,website:t.contacts.website,vk:t.contacts.vk,twitter:t.contacts.twitter,instagram:t.contacts.instagram,youtube:t.contacts.youtube,github:t.contacts.github,mainLink:t.contacts.mainLink}}}),j=u.register,d=u.handleSubmit;return Object(L.jsx)("form",{onSubmit:d((function(e){n(e).then((function(){return a(!1)})).catch((function(e){return l(e)}))})),children:Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{children:Object(L.jsx)("button",{children:"save"})}),o.map((function(e){return Object(L.jsx)("div",{className:$e.a.error,children:e},e)})),Object(L.jsxs)("div",{children:[Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Full name: "}),Object(L.jsx)("div",{children:Object(L.jsx)("input",Object(g.a)({type:"text",placeholder:"Full name"},j("fullName")))})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Looking for a job: "}),Object(L.jsx)("div",{children:Object(L.jsx)("input",Object(g.a)({type:"checkbox"},j("lookingForAJob")))})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"My professional skills: "}),Object(L.jsx)("div",{children:Object(L.jsx)("textarea",Object(g.a)({type:"text",placeholder:"My professional skills"},j("lookingForAJobDescription")))})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"About me: "}),Object(L.jsx)("div",{children:Object(L.jsx)("textarea",Object(g.a)({type:"text",placeholder:"About me"},j("aboutMe")))})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Contacts: "}),Object(L.jsx)("div",{children:Object.keys(t.contacts).map((function(e){return Object(L.jsxs)("div",{className:$e.a.contact,children:[Object(L.jsxs)("b",{children:[e,": "]}),Object(L.jsx)("input",Object(g.a)({type:"text",placeholder:e},j("contacts.".concat(e))))]},e)}))})]})]})]})})},rt=function(e){var t=e.profile,n=e.status,a=e.updateUserStatus,s=e.isOwner,c=e.savePhoto,o=e.saveProfile,l=Object(r.useState)(!1),u=Object(i.a)(l,2),j=u[0],d=u[1];return t?Object(L.jsxs)("div",{children:[Object(L.jsxs)("div",{className:$e.a.descriptionBlock,children:[Object(L.jsx)("img",{className:$e.a.avatar,src:t.photos.large||et.a,alt:"img"}),j?Object(L.jsx)(nt,{profile:t,saveProfile:o,setEditMode:d}):Object(L.jsx)(at,{profile:t,goToEditMode:function(){return d(!0)},isOwner:s}),Object(L.jsx)(Qe,{profile:t,status:n,updateUserStatus:a,isOwner:s})]}),s&&Object(L.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&c(e.target.files[0])}})]}):Object(L.jsx)(Le,{})},at=function(e){var t=e.profile,n=e.isOwner,r=e.goToEditMode;return Object(L.jsxs)("div",{children:[n&&Object(L.jsx)("button",{onClick:r,children:"edit"}),Object(L.jsxs)("div",{children:[Object(L.jsx)(b.a,{variant:"subtitle1",children:"Full name:"}),Object(L.jsx)(b.a,{variant:"subtitle2",children:t.fullName})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(b.a,{variant:"subtitle1",children:"Looking for a job:"}),Object(L.jsx)(b.a,{variant:"subtitle2",children:t.lookingForAJob?"yes":"no"})]}),t.lookingForAJob&&Object(L.jsxs)("div",{children:[Object(L.jsx)(b.a,{variant:"subtitle1",children:"My professional skills:"}),Object(L.jsx)(b.a,{variant:"subtitle2",children:t.lookingForAJobDescription})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(b.a,{variant:"subtitle1",children:"About me:"}),Object(L.jsx)(b.a,{variant:"subtitle2",children:t.aboutMe})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(b.a,{variant:"subtitle1",children:"Contacts:"}),Object.keys(t.contacts).map((function(e){return Object(L.jsx)(st,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},st=function(e){var t=e.contactTitle,n=e.contactValue;return Object(L.jsxs)("div",{className:$e.a.contact,children:[Object(L.jsxs)(b.a,{variant:"subtitle1",children:[t,": "]}),n]})},ct=n(18),it="profile/ADD_POST",ot="profile/SET_USER_PROFILE",lt="profile/SET_STATUS",ut="profile/DELETE_POST",jt="profile/SAVE_PHOTO_SUCCESS",dt={posts:[{id:1,message:"Hi, how are you?",likesCount:11},{id:2,message:"It's my first post",likesCount:22}],profile:null,status:""},bt=function(e){return{type:lt,status:e}},ft=function(e){return function(){var t=Object(q.a)(H.a.mark((function t(n){var r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(e);case 2:r=t.sent,n((a=r.data,{type:ot,profile:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},pt=n(236),Ot=n(237),ht=Object(l.a)((function(e){return{info:{marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(2)},content:{display:"flex",flexDirection:"column"},img:{height:"100px",borderRadius:"50%",marginBottom:e.spacing(1)}}})),gt=function(e){var t=e.message,n=e.likesCount,r=Object(m.a)(),a=ht(r);return Object(L.jsx)(pt.a,{className:a.info,children:Object(L.jsxs)(Ot.a,{className:a.content,children:[Object(L.jsx)("img",{className:a.img,src:et.a,alt:"avatar"}),Object(L.jsxs)("div",{children:[Object(L.jsx)(b.a,{variant:"body1",align:"center",children:t}),Object(L.jsxs)(b.a,{variant:"body2",align:"left",children:["like: ",n]})]})]})})},xt=n(112),mt=Object(l.a)((function(e){return{title:{marginBottom:e.spacing(1)}}})),vt=function(e){var t=e.posts,n=e.addPost,r=Object(m.a)(),a=mt(r);return Object(L.jsxs)("div",{children:[Object(L.jsx)(pt.a,{children:Object(L.jsxs)(Ot.a,{children:[Object(L.jsx)(b.a,{className:a.title,variant:"h5",children:"My Posts"}),Object(L.jsx)(xt.b,{sendMessage:n})]})}),Object(L.jsx)("div",{children:t.map((function(e){return Object(L.jsx)(gt,{message:e.message,likesCount:e.likesCount},e.id)}))})]})},wt={addPost:function(e){return{type:it,newPostText:e}}},yt=Object(W.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),wt)((function(e){var t=e.posts,n=e.addPost;return Object(L.jsx)(vt,{posts:t,addPost:n})})),kt=n(100),Ct=Object(l.a)((function(e){return{info:{margin:e.spacing(2),padding:e.spacing(2)},paper:{margin:e.spacing(2)}}})),St=function(e){var t=e.profile,n=e.status,r=e.updateUserStatus,a=e.isOwner,s=e.savePhoto,c=e.saveProfile,i=Object(m.a)(),o=Ct(i);return t?Object(L.jsxs)(Ze.a,{container:!0,children:[Object(L.jsx)(Ze.a,{item:!0,children:Object(L.jsx)(kt.a,{className:o.info,children:Object(L.jsx)(rt,{profile:t,status:n,updateUserStatus:r,isOwner:a,savePhoto:s,saveProfile:c})})}),Object(L.jsx)(Ze.a,{item:!0,className:o.paper,children:Object(L.jsx)(yt,{})})]}):Object(L.jsx)(Le,{})},Pt=n(49),_t={getUserProfile:ft,getUserStatus:function(e){return function(){var t=Object(q.a)(H.a.mark((function t(n){var r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(e);case 2:r=t.sent,n(bt(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(q.a)(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(e);case 2:0===t.sent.data.resultCode&&n(bt(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(q.a)(H.a.mark((function t(n){var r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(e);case 2:0===(r=t.sent).data.resultCode&&n((a=r.data.data.photos,{type:jt,photos:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(q.a)(H.a.mark((function t(n,r){var a,s;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.userId,t.next=3,re(e);case 3:if(0!==(s=t.sent).data.resultCode){t.next=8;break}n(ft(a)),t.next=9;break;case 8:return t.abrupt("return",Promise.reject(s.data.messages));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},It=Object(Pt.d)(Object(W.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId}}),_t))((function(e){var t=e.profile,n=e.status,a=e.authorizedUserId,s=e.getUserProfile,c=e.getUserStatus,i=e.updateUserStatus,l=e.savePhoto,u=e.saveProfile,j=Object(o.h)().userId||a||16528;return Object(r.useEffect)((function(){s(j),c(j)}),[c,s,j]),Object(L.jsx)(St,{profile:t,status:n,updateUserStatus:i,isOwner:j===a,savePhoto:l,saveProfile:u})})),Mt=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(g.a)(Object(g.a)({},e),r):e}))},Et="FOLLOW",Ft="UNFOLLOW",Nt="SET_USERS",Ut="SET_CURRENT_PAGE",At="SET_TOTAL_USERS_COUNT",Tt="TOGGLE_IS_FETCHING",Lt="TOGGLE_IS_FOLLOWING_PROGRESS",Dt={users:[],pageSize:100,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},zt=function(e){return{type:Et,userId:e}},Rt=function(e){return{type:Ft,userId:e}},Bt=function(e){return{type:Tt,isFetching:e}},Gt=function(e,t){return{type:Lt,isFetching:e,userId:t}},Jt=function(){var e=Object(q.a)(H.a.mark((function e(t,n,r,a){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gt(!0,n)),e.next=3,r(n);case 3:0===e.sent.data.resultCode&&t(a(n)),t(Gt(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Wt=n(99),Vt=n.n(Wt),Ht=n(130),qt=n.n(Ht),Yt=n(133),Zt=n.n(Yt),Xt=n(132),Kt=n.n(Xt),$t=n(131),Qt=n.n($t),en=function(e){var t=e.totalItemsCount,n=e.pageSize,a=e.currentPage,s=e.onPageChanged,c=e.portionSize,o=void 0===c?10:c,l=Object(r.useState)(1),u=Object(i.a)(l,2),j=u[0],b=u[1],p=Math.ceil(t/n),O=Array.from({length:p},(function(e,t){return t+1})),h=Math.ceil(p/o),g=(j-1)*o+1,x=j*o;return Object(L.jsxs)("div",{className:Vt.a.paginator,children:[j>1&&Object(L.jsxs)("div",{children:[Object(L.jsx)(d.a,{onClick:function(){b(1)},children:Object(L.jsx)(qt.a,{})}),Object(L.jsx)(d.a,{onClick:function(){b(j-1)},children:Object(L.jsx)(Qt.a,{})})]}),O.filter((function(e){return e>=g&&e<=x})).map((function(e){return Object(L.jsx)(f.a,{className:a===e?Vt.a.selectedPage:null,onClick:function(){return s(e)},children:e},e)})),h>j&&Object(L.jsxs)("div",{children:[Object(L.jsx)(d.a,{onClick:function(){b(j+1)},children:Object(L.jsx)(Kt.a,{})}),Object(L.jsx)(d.a,{onClick:function(){b(h)},children:Object(L.jsx)(Zt.a,{})})]})]})},tn=n(48),nn=n(241),rn=n(239),an=n(240),sn=Object(l.a)({root:{width:270,height:370,margin:"8px"},media:{height:"200px"}}),cn=function(e){var t=e.user,n=e.followingInProgress,r=e.follow,a=e.unfollow,s=sn();return Object(L.jsx)(Ze.a,{item:!0,children:Object(L.jsxs)(pt.a,{className:s.root,children:[Object(L.jsxs)(rn.a,{component:tn.b,to:"/profile/".concat(t.id),children:[Object(L.jsx)(an.a,{className:s.media,image:t.photos.small?t.photos.small:et.a,title:t.name}),Object(L.jsxs)(Ot.a,{children:[Object(L.jsxs)(b.a,{noWrap:!0,gutterBottom:!0,variant:"h6",component:"h2",children:["Name:",Object(L.jsx)("br",{}),"$",t.name]}),Object(L.jsxs)(b.a,{noWrap:!0,variant:"body2",color:"textSecondary",component:"p",children:["Status: ",t.status||"No status"]})]})]}),Object(L.jsx)(nn.a,{children:t.followed?Object(L.jsx)(f.a,{variant:"contained",fullWidth:!0,size:"small",disabled:n.some((function(e){return e===t.id})),onClick:function(){return a(t.id)},children:"Unfollow"}):Object(L.jsx)(f.a,{variant:"contained",fullWidth:!0,size:"small",disabled:n.some((function(e){return e===t.id})),onClick:function(){return r(t.id)},children:"Follow"})})]})})},on=Object(l.a)({root:{flexDirection:"column",alignItems:"center",flexWrap:"wrap"},cards:{margin:20,display:"flex",flexWrap:"wrap",justifyContent:"center"}}),ln=function(e){var t=e.totalUsersCount,n=e.pageSize,r=e.currentPage,a=e.onPageChanged,s=e.follow,c=e.unfollow,i=e.users,o=e.followingInProgress,l=on();return Object(L.jsxs)(Ze.a,{container:!0,className:l.root,children:[Object(L.jsx)(Ze.a,{item:!0,children:Object(L.jsx)(en,{totalItemsCount:t,pageSize:n,currentPage:r,onPageChanged:a})}),Object(L.jsx)(Ze.a,{item:!0,className:l.cards,children:i.map((function(e){return Object(L.jsx)(cn,{user:e,followingInProgress:o,follow:s,unfollow:c},e.id)}))})]})},un=n(134),jn=Object(un.a)((function(e){return e.usersPage.users}),(function(e){return e})),dn={follow:function(e){return function(){var t=Object(q.a)(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jt(n,e,K,zt);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(q.a)(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jt(n,e,$,Rt);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},toggleFollowingProgress:Gt,getUsersThunkCreator:function(e,t){return function(){var n=Object(q.a)(H.a.mark((function n(r){var a;return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Bt(!0)),r({type:Ut,currentPage:e}),n.next=4,X(e,t);case 4:a=n.sent,r(Bt(!1)),r((c=a.items,{type:Nt,users:c})),r((s=a.totalCount,{type:At,totalUsersCount:s}));case 8:case"end":return n.stop()}var s,c}),n)})));return function(e){return n.apply(this,arguments)}}()}},bn=Object(W.b)((function(e){return{users:jn(e),pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),dn)((function(e){var t=e.follow,n=e.unfollow,a=e.users,s=e.pageSize,c=e.totalUsersCount,i=e.currentPage,o=e.isFetching,l=e.toggleFollowingProgress,u=e.followingInProgress,j=e.getUsersThunkCreator;Object(r.useEffect)((function(){j(i,s)}),[i,j,s]);return Object(L.jsxs)(L.Fragment,{children:[o?Object(L.jsx)(Le,{}):null,Object(L.jsx)(ln,{totalUsersCount:c,pageSize:s,currentPage:i,onPageChanged:function(e){j(e,s)},follow:t,unfollow:n,users:a,toggleFollowingProgress:l,followingInProgress:u})]})})),fn=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,249))})),pn={initializeApp:function(){return function(e){e(pe()).then((function(){e({type:Ue})}))}}},On=Object(W.b)((function(e){return{initialized:e.app.initialized}}),pn)((function(e){var t=e.initialized,n=e.initializeApp,a=Object(r.useState)(!0),s=Object(i.a)(a,2),c=s[0],l=s[1];Object(r.useEffect)((function(){n()}),[n]);var u=Object(Xe.a)({palette:{type:c?"dark":"light",primary:{main:"#FFFFFFFF"},secondary:{main:"#000000FF"}}}),j=Object(L.jsx)("div",{className:"app-wrapper",children:Object(L.jsx)(Le,{})});return t?Object(L.jsxs)(qe.a,{theme:u,children:[Object(L.jsx)(Ye.a,{}),Object(L.jsx)(Ze.a,{container:!0,direction:"column",children:Object(L.jsxs)(He,{children:[Object(L.jsx)(Ze.a,{item:!0,children:Object(L.jsx)(Ne,{darkMode:c,setDarkMode:l})}),Object(L.jsx)(Ze.a,{item:!0,style:{margin:56,padding:24},children:Object(L.jsx)(r.Suspense,{fallback:j,children:Object(L.jsxs)(o.d,{children:[Object(L.jsx)(o.b,{path:"/",exact:!0,component:Re}),Object(L.jsx)(o.b,{path:"/profile/:userId?",component:It}),Object(L.jsx)(o.b,{path:"/dialogs",component:fn}),Object(L.jsx)(o.b,{path:"/users",component:bn}),Object(L.jsx)(o.b,{component:Be})]})})})]})})]}):j})),hn=n(113),gn=n(135),xn=Object(Pt.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:var n={id:5,message:t.newPostText,likesCount:0};return Object(g.a)(Object(g.a)({},e),{},{posts:[].concat(Object(ct.a)(e.posts),[n]),newPostText:""});case ot:return Object(g.a)(Object(g.a)({},e),{},{profile:t.profile});case lt:return Object(g.a)(Object(g.a)({},e),{},{status:t.status});case ut:return Object(g.a)(Object(g.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case jt:return Object(g.a)(Object(g.a)({},e),{},{profile:Object(g.a)(Object(g.a)({},e.profile),{},{photos:t.photos})});default:return e}},dialogsPage:hn.a,usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Et:return Object(g.a)(Object(g.a)({},e),{},{users:Mt(e.users,t.userId,"id",{followed:!0})});case Ft:return Object(g.a)(Object(g.a)({},e),{},{users:Mt(e.users,t.userId,"id",{followed:!1})});case Nt:return Object(g.a)(Object(g.a)({},e),{},{users:t.users});case Ut:return Object(g.a)(Object(g.a)({},e),{},{currentPage:t.currentPage});case At:return Object(g.a)(Object(g.a)({},e),{},{totalUsersCount:t.totalUsersCount});case Tt:return Object(g.a)(Object(g.a)({},e),{},{isFetching:t.isFetching});case Lt:return Object(g.a)(Object(g.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(ct.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:case ue:return Object(g.a)(Object(g.a)({},e),t.payload);case le:return Object(g.a)(Object(g.a)({},e),{},{errorMessage:t.errorMessage});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return Object(g.a)(Object(g.a)({},e),{},{initialized:!0});default:return e}}}),mn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Pt.d,vn=Object(Pt.e)(xn,mn(Object(Pt.a)(gn.a)));c.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(tn.a,{basename:"/social_network",children:Object(L.jsx)(W.a,{store:vn,children:Object(L.jsx)(On,{})})})}),document.getElementById("root"))},30:function(e,t,n){"use strict";t.a=n.p+"static/media/avatar.4084d3ab.svg"},60:function(e,t,n){e.exports={bgImg:"profileInfo_bgImg__3Ay7A",descriptionBlock:"profileInfo_descriptionBlock__2S594",avatar:"profileInfo_avatar__zeCMj",contact:"profileInfo_contact__3jMB8",error:"profileInfo_error__3iHhv"}},98:function(e,t,n){e.exports={formControl:"addMessageForm_formControl__2AMq-",error:"addMessageForm_error__mgWRR"}},99:function(e,t,n){e.exports={paginator:"paginator_paginator__3rETt",selectedPage:"paginator_selectedPage__3hMHp"}}},[[182,1,2]]]);
//# sourceMappingURL=main.22522d36.chunk.js.map