(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[0],{100:function(e,t,n){e.exports={paginator:"paginator_paginator__3rETt",selectedPage:"paginator_selectedPage__3hMHp"}},113:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),a=n(86),s=n(99),c=n.n(s),i=n(2),o=function(e){var t=e.sendMessage,n=e.maxLength,s=Object(a.a)(),o=s.register,u=s.handleSubmit,l=s.formState.errors;return Object(i.jsx)("form",{onSubmit:u((function(e){t(e.newMessageBody)})),children:Object(i.jsxs)("div",{className:c.a.formControl,children:[Object(i.jsx)("div",{children:Object(i.jsx)("textarea",Object(r.a)({className:l.newMessageBody?c.a.error:"",type:"text",placeholder:"Enter your message"},o("newMessageBody",{required:"Field is required",maxLength:{value:n,message:"Max length is ".concat(n," symbols")}})))}),l.newMessageBody&&Object(i.jsx)("span",{children:l.newMessageBody.message}),Object(i.jsx)("div",{}),Object(i.jsx)("input",{type:"submit",value:"Send"})]})})}},114:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),a=n(24),s=n(16),c=n(2),i=function(e){return{isAuth:e.auth.isAuth}},o=function(e){return Object(a.b)(i)((function(t){return t.isAuth?Object(c.jsx)(e,Object(r.a)({},t)):Object(c.jsx)(s.a,{to:"login"})}))}},115:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(18),a=n(7),s=n(29),c="SEND_MESSAGE",i={dataDialog:[{id:1,name:"Dimych",img:s.a},{id:2,name:"Andrey",img:s.a},{id:3,name:"Sveta",img:s.a},{id:4,name:"Sasha",img:s.a},{id:5,name:"Victor",img:s.a},{id:6,name:"Valera",img:s.a}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you?"},{id:3,message:"Yo"},{id:4,message:"Yo"},{id:5,message:"Yo"}]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n=t.newMessageBody;return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:6,message:n}])});default:return e}},u=function(e){return{type:c,newMessageBody:e}}},132:function(e,t,n){e.exports={welcome:"welcome_welcome__2l93p"}},133:function(e,t,n){e.exports={item:"post_item__3QO81"}},185:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(12),c=n.n(s),i=n(15),o=n(16),u=n(220),l=n(236),j=n(237),d=n(223),b=n(60),f=n(230),p=n(130),O=n.n(p),h=n(37),g=n(7),x=n(4),m=n(25),v=n(248),w=n(224),y=n(225),k=n(226),C=n(227),P=n(228),S=n(121),_=n.n(S),I=n(120),M=n.n(I),E=n(122),A=n.n(E),F=n(123),U=n.n(F),N=n(124),T=n.n(N),L=n(2),D=Object(u.a)((function(e){return{drawer:{width:Ie,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:Ie,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},toolbar:Object(g.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)}})),z=function(e){var t,n,r=e.handleDrawerClose,a=e.open,s=Object(m.a)(),c=D(s),i=Object(o.g)();return Object(L.jsxs)(v.a,{variant:"permanent",className:Object(x.a)(c.drawer,(t={},Object(h.a)(t,c.drawerOpen,a),Object(h.a)(t,c.drawerClose,!a),t)),classes:{paper:Object(x.a)((n={},Object(h.a)(n,c.drawerOpen,a),Object(h.a)(n,c.drawerClose,!a),n))},children:[Object(L.jsx)("div",{className:c.toolbar,children:Object(L.jsx)(d.a,{onClick:r,children:"rtl"===s.direction?Object(L.jsx)(M.a,{}):Object(L.jsx)(_.a,{})})}),Object(L.jsx)(w.a,{}),Object(L.jsxs)(y.a,{children:[Object(L.jsxs)(k.a,{button:!0,onClick:function(){return i.push("/profile")},children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(A.a,{})}),Object(L.jsx)(P.a,{primary:"Profile"})]}),Object(L.jsxs)(k.a,{button:!0,onClick:function(){return i.push("/dialogs")},children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(U.a,{})}),Object(L.jsx)(P.a,{primary:"Dialogs"})]}),Object(L.jsxs)(k.a,{button:!0,onClick:function(){return i.push("/users")},children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(T.a,{})}),Object(L.jsx)(P.a,{primary:"Users"})]})]})]})},B=n(131),R=n.n(B),G=n(129),J=n.n(G),W=n(24),V=n(9),H=n.n(V),Z=n(14),q=n(126),X=n.n(q).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"b45f20e6-c418-486d-bf45-21bf8191b135"}}),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return X.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},K=function(e){return X.post("follow/".concat(e))},$=function(e){return X.delete("follow/".concat(e))},Q=function(e){return X.get("profile/".concat(e))},ee=function(e){return X.get("profile/status/".concat(e))},te=function(e){return X.put("profile/status",{status:e})},ne=function(e){var t=new FormData;return t.append("image",e),X.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},re=function(e){return X.put("profile",e)},ae=function(){return X.get("auth/me")},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return X.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},ce=function(){return X.delete("auth/login")},ie=function(){return X.get("security/get-captcha-url")},oe="auth/SET_USER_DATA",ue="auth/SET_ERROR_LOGIN",le="auth/GET_CAPTCHA_URL_SUCCESS",je={id:null,email:null,login:null,isAuth:!1,errorMessage:null,captchaUrl:null},de=function(e){return{type:le,payload:{captchaUrl:e}}},be=function(e){return{type:ue,errorMessage:e}},fe=function(e,t,n,r){return{type:oe,payload:{userId:e,email:t,login:n,isAuth:r}}},pe=function(){return function(){var e=Object(Z.a)(H.a.mark((function e(t){var n,r,a,s,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,a=r.id,s=r.login,c=r.email,t(fe(a,c,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Oe=function(){return function(){var e=Object(Z.a)(H.a.mark((function e(t){var n,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:n=e.sent,r=n.data.url,t(de(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},he=n(231),ge=n(232),xe=n(233),me=n(234),ve=n(247),we=n(229),ye=n(235),ke=n(39),Ce=n(72),Pe=function(e){var t=e.errorMessage,n=e.login,a=e.captchaUrl,s=Object(r.useState)(!1),c=Object(i.a)(s,2),o=c[0],u=c[1],l=function(){u(!1)};return Object(L.jsxs)("div",{children:[Object(L.jsx)(f.a,{variant:"outlined",color:"secondary",onClick:function(){u(!0)},children:"Login"}),Object(L.jsxs)(he.a,{open:o,onClose:l,"aria-labelledby":"form-dialog-title",children:[Object(L.jsx)(ge.a,{id:"form-dialog-title",children:"Login"}),Object(L.jsxs)(xe.a,{children:[Object(L.jsxs)(me.a,{children:[Object(L.jsx)(b.a,{variant:"subtitle1",children:"Please use test email: "}),Object(L.jsx)(b.a,{variant:"h4",children:"free@samuraijs.com"}),Object(L.jsx)(b.a,{variant:"subtitle1",children:"Please use test password: "}),Object(L.jsx)(b.a,{variant:"h4",children:"free"})]}),Object(L.jsx)(ke.c,{initialValues:{email:"free@samuraijs.com",password:"free"},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(e){var t;n((t=e).email,t.password,t.rememberMe,t.captcha)},children:function(e){var n=e.submitForm;return Object(L.jsxs)(ke.b,{children:[Object(L.jsx)(ve.a,{margin:1,children:Object(L.jsx)(ke.a,{component:Ce.b,name:"email",type:"email",label:"Email",helperText:"email"})}),Object(L.jsx)(ve.a,{margin:1,children:Object(L.jsx)(ke.a,{component:Ce.b,type:"password",label:"Password",name:"password"})}),Object(L.jsx)(ve.a,{margin:1,children:Object(L.jsx)(we.a,{control:Object(L.jsx)(ke.a,{component:Ce.a,type:"checkbox",name:"rememberMe"}),label:"Remember me"})}),Object(L.jsxs)(ve.a,{margin:1,children:[a&&Object(L.jsx)("img",{style:{display:"inherit"},src:a,alt:"captcha"}),a&&Object(L.jsx)(ke.a,{component:Ce.b,type:"captcha",label:"Captcha",name:"captcha"}),t&&Object(L.jsx)(ve.a,{margin:2,children:Object(L.jsx)(b.a,{variant:"subtitle1",style:{color:"red",backgroundColor:"white"},children:t})})]}),Object(L.jsxs)(ye.a,{children:[Object(L.jsx)(f.a,{onClick:l,children:"Cancel"}),Object(L.jsx)(f.a,{onClick:n,children:"Login"})]})]})}})]})]})]})},Se={login:function(e,t,n,r){return function(){var a=Object(Z.a)(H.a.mark((function a(s){var c;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,se(e,t,n,r);case 2:0===(c=a.sent).data.resultCode?s(pe()):(10===c.data.resultCode&&s(Oe()),s(be(c.data.messages[0])));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},setErrorLogin:be},_e=Object(W.b)((function(e){return{isAuth:e.auth.isAuth,errorMessage:e.auth.errorMessage,captchaUrl:e.auth.captchaUrl}}),Se)((function(e){var t=e.isAuth,n=e.login,r=e.errorMessage,a=e.captchaUrl;return t?Object(L.jsx)(o.a,{to:"profile"}):Object(L.jsx)(Pe,{errorMessage:r,login:n,captchaUrl:a})})),Ie=200,Me=Object(u.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:36},hide:{display:"none"},toolbar:{justifyContent:"space-between"},title:{marginLeft:20},login:{display:"flex",alignItems:"center"},empty:{flexGrow:1},name:{marginRight:12}}})),Ee=function(e){var t=e.isAuth,n=e.login,a=e.logout,s=e.darkMode,c=e.setDarkMode,o=Me(),u=Object(r.useState)(!1),p=Object(i.a)(u,2),h=p[0],g=p[1],x=function(){g(!1)};return Object(L.jsxs)("div",{className:o.root,children:[Object(L.jsx)(l.a,{position:"fixed",className:o.appBar,children:Object(L.jsxs)(j.a,{className:o.toolbar,children:[h?Object(L.jsx)(d.a,{onClick:x,color:"inherit",edge:"start",children:Object(L.jsx)(J.a,{})}):Object(L.jsx)(d.a,{color:"inherit",onClick:function(){g(!0)},edge:"start",children:Object(L.jsx)(O.a,{})}),Object(L.jsx)(b.a,{variant:"h6",noWrap:!0,className:o.title,children:"Social network"}),Object(L.jsx)("div",{className:o.empty}),Object(L.jsxs)("div",{className:o.login,children:[Object(L.jsx)(d.a,{color:"secondary",onClick:function(){return c(!s)},children:Object(L.jsx)(R.a,{})}),Object(L.jsx)("div",{children:t?Object(L.jsxs)("div",{className:o.login,children:[Object(L.jsx)(b.a,{className:o.name,variant:"h6",children:n}),Object(L.jsx)(f.a,{color:"secondary",variant:"outlined",onClick:a,children:"Log out"})]}):Object(L.jsx)(_e,{})})]})]})}),Object(L.jsx)(z,{open:h,handleDrawerClose:x})]})},Ae={logout:function(){return function(){var e=Object(Z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:0===e.sent.data.resultCode&&t(fe(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Fe=Object(W.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),Ae)((function(e){var t=e.isAuth,n=e.login,r=e.logout,a=e.darkMode,s=e.setDarkMode;return Object(L.jsx)(Ee,{isAuth:t,login:n,logout:r,darkMode:a,setDarkMode:s})})),Ue="INITIALIZED_SUCCESS",Ne={initialized:!1},Te=n.p+"static/media/Spinner-1s-300px.eadce372.svg",Le=function(){return Object(L.jsx)("img",{src:Te,alt:"loading"})},De=n.p+"static/media/welcome-home-welcome-home-de.842af542.jpg",ze=n(132),Be=n.n(ze),Re=function(){return Object(L.jsx)("div",{className:Be.a.welcome,children:Object(L.jsx)("img",{src:De,alt:"welcome"})})},Ge=function(){return Object(L.jsx)("div",{children:"Not Found"})},Je=n(66),We=n(67),Ve=n(142),He=n(141),Ze=function(e){Object(Ve.a)(n,e);var t=Object(He.a)(n);function n(){var e;Object(Je.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return Object(We.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0}),console.log(t)}},{key:"render",value:function(){return this.state.error?Object(L.jsx)("img",{src:"https://miro.medium.com/max/700/1*v4dLIlWpJkCiSDKv7xguLA.png",alt:"error"}):this.props.children}}]),n}(a.a.Component),qe=n(245),Xe=n(246),Ye=n(238),Ke=n(140),$e=n(59),Qe=n.n($e),et=function(e){var t=e.profile,n=e.status,a=e.updateUserStatus,s=e.isOwner,c=Object(r.useState)(!1),o=Object(i.a)(c,2),u=o[0],l=o[1],j=Object(r.useState)(),d=Object(i.a)(j,2),b=d[0],f=d[1];Object(r.useEffect)((function(){f(n)}),[n]);return t?Object(L.jsx)("div",{children:u?Object(L.jsx)("div",{children:Object(L.jsx)("input",{onChange:function(e){f(e.currentTarget.value)},autoFocus:!0,onBlur:function(){return l(!1),void a(b)},type:"text",defaultValue:b})}):Object(L.jsx)("div",{children:Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Status: "}),Object(L.jsx)("span",{onDoubleClick:s?function(){l(!0)}:null,children:b||"No status"})]})})}):Object(L.jsx)(Le,{})},tt=n(29),nt=n(86),rt=function(e){var t=e.profile,n=e.saveProfile,a=e.setEditMode,s=Object(r.useState)([]),c=Object(i.a)(s,2),o=c[0],u=c[1],l=Object(nt.a)({defaultValues:{fullName:t.fullName,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,aboutMe:t.aboutMe,contacts:{facebook:t.contacts.facebook,website:t.contacts.website,vk:t.contacts.vk,twitter:t.contacts.twitter,instagram:t.contacts.instagram,youtube:t.contacts.youtube,github:t.contacts.github,mainLink:t.contacts.mainLink}}}),j=l.register,d=l.handleSubmit;return Object(L.jsx)("form",{onSubmit:d((function(e){n(e).then((function(){return a(!1)})).catch((function(e){return u(e)}))})),children:Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{children:Object(L.jsx)("button",{children:"save"})}),o.map((function(e){return Object(L.jsx)("div",{className:Qe.a.error,children:e},e)})),Object(L.jsxs)("div",{children:[Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Full name: "}),Object(L.jsx)("div",{children:Object(L.jsx)("input",Object(g.a)({type:"text",placeholder:"Full name"},j("fullName")))})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Looking for a job: "}),Object(L.jsx)("div",{children:Object(L.jsx)("input",Object(g.a)({type:"checkbox"},j("lookingForAJob")))})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"My professional skills: "}),Object(L.jsx)("div",{children:Object(L.jsx)("textarea",Object(g.a)({type:"text",placeholder:"My professional skills"},j("lookingForAJobDescription")))})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"About me: "}),Object(L.jsx)("div",{children:Object(L.jsx)("textarea",Object(g.a)({type:"text",placeholder:"About me"},j("aboutMe")))})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Contacts: "}),Object(L.jsx)("div",{children:Object.keys(t.contacts).map((function(e){return Object(L.jsxs)("div",{className:Qe.a.contact,children:[Object(L.jsxs)("b",{children:[e,": "]}),Object(L.jsx)("input",Object(g.a)({type:"text",placeholder:e},j("contacts.".concat(e))))]},e)}))})]})]})]})})},at=function(e){var t=e.profile,n=e.status,a=e.updateUserStatus,s=e.isOwner,c=e.savePhoto,o=e.saveProfile,u=Object(r.useState)(!1),l=Object(i.a)(u,2),j=l[0],d=l[1];return t?Object(L.jsxs)("div",{children:[Object(L.jsxs)("div",{className:Qe.a.descriptionBlock,children:[Object(L.jsx)("img",{className:Qe.a.avatar,src:t.photos.large||tt.a,alt:"img"}),j?Object(L.jsx)(rt,{profile:t,saveProfile:o,setEditMode:d}):Object(L.jsx)(st,{profile:t,goToEditMode:function(){return d(!0)},isOwner:s}),Object(L.jsx)(et,{profile:t,status:n,updateUserStatus:a,isOwner:s})]}),s&&Object(L.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&c(e.target.files[0])}})]}):Object(L.jsx)(Le,{})},st=function(e){var t=e.profile,n=e.isOwner,r=e.goToEditMode;return Object(L.jsxs)("div",{children:[n&&Object(L.jsx)("button",{onClick:r,children:"edit"}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Full name"})," ",t.fullName]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Looking for a job:"})," ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"My professional skills:"})," ",t.lookingForAJobDescription]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"About me:"})," ",t.aboutMe]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("b",{children:"Contacts:"}),Object.keys(t.contacts).map((function(e){return Object(L.jsx)(ct,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},ct=function(e){var t=e.contactTitle,n=e.contactValue;return Object(L.jsxs)("div",{className:Qe.a.contact,children:[Object(L.jsxs)("b",{children:[t,": "]}),n]})},it=n(18),ot="profile/ADD_POST",ut="profile/SET_USER_PROFILE",lt="profile/SET_STATUS",jt="profile/DELETE_POST",dt="profile/SAVE_PHOTO_SUCCESS",bt={posts:[{id:1,message:"Hi, how are you?",likesCount:11},{id:2,message:"It's my first post",likesCount:22}],profile:null,status:""},ft=function(e){return{type:lt,status:e}},pt=function(e){return function(){var t=Object(Z.a)(H.a.mark((function t(n){var r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(e);case 2:r=t.sent,n((a=r.data,{type:ut,profile:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},Ot=n(98),ht=n.n(Ot),gt=n(133),xt=n.n(gt),mt=function(e){var t=e.message,n=e.likesCount;return Object(L.jsxs)("div",{className:xt.a.item,children:[Object(L.jsx)("img",{src:tt.a,alt:"avatar"}),t,Object(L.jsxs)("div",{children:[Object(L.jsx)("span",{children:"like: "}),Object(L.jsx)("span",{children:n})]})]})},vt=n(113),wt=function(e){var t=e.posts,n=e.addPost;return Object(L.jsxs)("div",{className:ht.a.postsBlock,children:[Object(L.jsx)("h3",{children:"My Posts"}),Object(L.jsx)("div",{children:Object(L.jsx)(vt.a,{sendMessage:n,maxLength:10})}),Object(L.jsx)("div",{className:ht.a.posts,children:t.map((function(e){return Object(L.jsx)(mt,{message:e.message,likesCount:e.likesCount},e.id)}))})]})},yt={addPost:function(e){return{type:ot,newPostText:e}}},kt=Object(W.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),yt)((function(e){var t=e.posts,n=e.addPost;return Object(L.jsx)(wt,{posts:t,addPost:n})})),Ct=function(e){var t=e.profile,n=e.status,r=e.updateUserStatus,a=e.isOwner,s=e.savePhoto,c=e.saveProfile;return Object(L.jsxs)("div",{children:[Object(L.jsx)(at,{profile:t,status:n,updateUserStatus:r,isOwner:a,savePhoto:s,saveProfile:c}),Object(L.jsx)(kt,{})]})},Pt=n(47),St=n(114),_t={getUserProfile:pt,getUserStatus:function(e){return function(){var t=Object(Z.a)(H.a.mark((function t(n){var r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(e);case 2:r=t.sent,n(ft(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(Z.a)(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(e);case 2:0===t.sent.data.resultCode&&n(ft(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(Z.a)(H.a.mark((function t(n){var r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(e);case 2:0===(r=t.sent).data.resultCode&&n((a=r.data.data.photos,{type:dt,photos:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(Z.a)(H.a.mark((function t(n,r){var a,s;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.userId,t.next=3,re(e);case 3:if(0!==(s=t.sent).data.resultCode){t.next=8;break}n(pt(a)),t.next=9;break;case 8:return t.abrupt("return",Promise.reject(s.data.messages));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},It=Object(Pt.d)(Object(W.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId}}),_t),St.a)((function(e){var t=e.profile,n=e.status,a=e.authorizedUserId,s=e.getUserProfile,c=e.getUserStatus,i=e.updateUserStatus,u=e.savePhoto,l=e.saveProfile,j=Object(o.h)().userId||a;return Object(r.useEffect)((function(){s(j),c(j)}),[c,s,j]),Object(L.jsx)(Ct,{profile:t,status:n,updateUserStatus:i,isOwner:j===a,savePhoto:u,saveProfile:l})})),Mt=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(g.a)(Object(g.a)({},e),r):e}))},Et="FOLLOW",At="UNFOLLOW",Ft="SET_USERS",Ut="SET_CURRENT_PAGE",Nt="SET_TOTAL_USERS_COUNT",Tt="TOGGLE_IS_FETCHING",Lt="TOGGLE_IS_FOLLOWING_PROGRESS",Dt={users:[],pageSize:100,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},zt=function(e){return{type:Et,userId:e}},Bt=function(e){return{type:At,userId:e}},Rt=function(e){return{type:Tt,isFetching:e}},Gt=function(e,t){return{type:Lt,isFetching:e,userId:t}},Jt=function(){var e=Object(Z.a)(H.a.mark((function e(t,n,r,a){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gt(!0,n)),e.next=3,r(n);case 3:0===e.sent.data.resultCode&&t(a(n)),t(Gt(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Wt=n(100),Vt=n.n(Wt),Ht=n(134),Zt=n.n(Ht),qt=n(137),Xt=n.n(qt),Yt=n(136),Kt=n.n(Yt),$t=n(135),Qt=n.n($t),en=function(e){var t=e.totalItemsCount,n=e.pageSize,a=e.currentPage,s=e.onPageChanged,c=e.portionSize,o=void 0===c?10:c,u=Object(r.useState)(1),l=Object(i.a)(u,2),j=l[0],b=l[1],p=Math.ceil(t/n),O=Array.from({length:p},(function(e,t){return t+1})),h=Math.ceil(p/o),g=(j-1)*o+1,x=j*o;return Object(L.jsxs)("div",{className:Vt.a.paginator,children:[j>1&&Object(L.jsxs)("div",{children:[Object(L.jsx)(d.a,{onClick:function(){b(1)},children:Object(L.jsx)(Zt.a,{})}),Object(L.jsx)(d.a,{onClick:function(){b(j-1)},children:Object(L.jsx)(Qt.a,{})})]}),O.filter((function(e){return e>=g&&e<=x})).map((function(e){return Object(L.jsx)(f.a,{className:a===e?Vt.a.selectedPage:null,onClick:function(){return s(e)},children:e},e)})),h>j&&Object(L.jsxs)("div",{children:[Object(L.jsx)(d.a,{onClick:function(){b(j+1)},children:Object(L.jsx)(Kt.a,{})}),Object(L.jsx)(d.a,{onClick:function(){b(h)},children:Object(L.jsx)(Xt.a,{})})]})]})},tn=n(46),nn=n(243),rn=n(239),an=n(240),sn=n(241),cn=n(242),on=Object(u.a)({root:{width:270,height:370,margin:"8px"},media:{height:"200px"}}),un=function(e){var t=e.user,n=e.followingInProgress,r=e.follow,a=e.unfollow,s=on();return Object(L.jsx)(Ye.a,{item:!0,children:Object(L.jsxs)(rn.a,{className:s.root,children:[Object(L.jsxs)(an.a,{component:tn.b,to:"/profile/".concat(t.id),children:[Object(L.jsx)(sn.a,{className:s.media,image:t.photos.small?t.photos.small:tt.a,title:t.name}),Object(L.jsxs)(cn.a,{children:[Object(L.jsxs)(b.a,{noWrap:!0,gutterBottom:!0,variant:"h6",component:"h2",children:["Name:",Object(L.jsx)("br",{}),"$",t.name]}),Object(L.jsxs)(b.a,{noWrap:!0,variant:"body2",color:"textSecondary",component:"p",children:["Status: ",t.status||"No status"]})]})]}),Object(L.jsx)(nn.a,{children:t.followed?Object(L.jsx)(f.a,{variant:"contained",fullWidth:!0,size:"small",disabled:n.some((function(e){return e===t.id})),onClick:function(){return a(t.id)},children:"Unfollow"}):Object(L.jsx)(f.a,{variant:"contained",fullWidth:!0,size:"small",disabled:n.some((function(e){return e===t.id})),onClick:function(){return r(t.id)},children:"Follow"})})]})})},ln=Object(u.a)({root:{flexDirection:"column",alignItems:"center"},cards:{margin:20,display:"flex",flexWrap:"wrap",justifyContent:"center"}}),jn=function(e){var t=e.totalUsersCount,n=e.pageSize,r=e.currentPage,a=e.onPageChanged,s=e.follow,c=e.unfollow,i=e.users,o=e.followingInProgress,u=ln();return Object(L.jsxs)(Ye.a,{container:!0,className:u.root,children:[Object(L.jsx)(Ye.a,{item:!0,children:Object(L.jsx)(en,{totalItemsCount:t,pageSize:n,currentPage:r,onPageChanged:a})}),Object(L.jsx)(Ye.a,{item:!0,className:u.cards,children:i.map((function(e){return Object(L.jsx)(un,{user:e,followingInProgress:o,follow:s,unfollow:c},e.id)}))})]})},dn=n(138),bn=Object(dn.a)((function(e){return e.usersPage.users}),(function(e){return e})),fn=n(244),pn={follow:function(e){return function(){var t=Object(Z.a)(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jt(n,e,K,zt);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(Z.a)(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jt(n,e,$,Bt);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},toggleFollowingProgress:Gt,getUsersThunkCreator:function(e,t){return function(){var n=Object(Z.a)(H.a.mark((function n(r){var a;return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Rt(!0)),r({type:Ut,currentPage:e}),n.next=4,Y(e,t);case 4:a=n.sent,r(Rt(!1)),r((c=a.items,{type:Ft,users:c})),r((s=a.totalCount,{type:Nt,totalUsersCount:s}));case 8:case"end":return n.stop()}var s,c}),n)})));return function(e){return n.apply(this,arguments)}}()}},On=Object(W.b)((function(e){return{users:bn(e),pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),pn)((function(e){var t=e.follow,n=e.unfollow,a=e.users,s=e.pageSize,c=e.totalUsersCount,i=e.currentPage,o=e.isFetching,u=e.toggleFollowingProgress,l=e.followingInProgress,j=e.getUsersThunkCreator;Object(r.useEffect)((function(){j(i,s)}),[i,j,s]);var d=Object(m.a)();return Object(L.jsxs)(L.Fragment,{children:[o?Object(L.jsx)(fn.a,{style:{backgroundColor:"#303030",marginBottom:d.spacing(2)}}):null,Object(L.jsx)(jn,{totalUsersCount:c,pageSize:s,currentPage:i,onPageChanged:function(e){j(e,s)},follow:t,unfollow:n,users:a,toggleFollowingProgress:u,followingInProgress:l})]})})),hn=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,253))})),gn={initializeApp:function(){return function(e){e(pe()).then((function(){e({type:Ue})}))}}},xn=Object(W.b)((function(e){return{initialized:e.app.initialized}}),gn)((function(e){var t=e.initialized,n=e.initializeApp,a=Object(r.useState)(!0),s=Object(i.a)(a,2),c=s[0],u=s[1];Object(r.useEffect)((function(){n()}),[n]);var l=Object(Ke.a)({palette:{type:c?"dark":"light",primary:{main:"#FFFFFFFF"},secondary:{main:"#000000FF"}}}),j=Object(L.jsx)("div",{className:"app-wrapper",children:Object(L.jsx)(Le,{})});return t?Object(L.jsxs)(qe.a,{theme:l,children:[Object(L.jsx)(Xe.a,{}),Object(L.jsx)(Ye.a,{container:!0,direction:"column",children:Object(L.jsxs)(Ze,{children:[Object(L.jsx)(Ye.a,{item:!0,children:Object(L.jsx)(Fe,{darkMode:c,setDarkMode:u})}),Object(L.jsx)(Ye.a,{item:!0,style:{margin:56,padding:24},children:Object(L.jsx)(r.Suspense,{fallback:j,children:Object(L.jsxs)(o.d,{children:[Object(L.jsx)(o.b,{path:"/",exact:!0,component:Re}),Object(L.jsx)(o.b,{path:"/profile/:userId?",component:It}),Object(L.jsx)(o.b,{path:"/dialogs",component:hn}),Object(L.jsx)(o.b,{path:"/users",component:On}),Object(L.jsx)(o.b,{component:Ge})]})})})]})})]}):j})),mn=n(115),vn=n(139),wn=Object(Pt.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:var n={id:5,message:t.newPostText,likesCount:0};return Object(g.a)(Object(g.a)({},e),{},{posts:[].concat(Object(it.a)(e.posts),[n]),newPostText:""});case ut:return Object(g.a)(Object(g.a)({},e),{},{profile:t.profile});case lt:return Object(g.a)(Object(g.a)({},e),{},{status:t.status});case jt:return Object(g.a)(Object(g.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case dt:return Object(g.a)(Object(g.a)({},e),{},{profile:Object(g.a)(Object(g.a)({},e.profile),{},{photos:t.photos})});default:return e}},dialogsPage:mn.a,usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Et:return Object(g.a)(Object(g.a)({},e),{},{users:Mt(e.users,t.userId,"id",{followed:!0})});case At:return Object(g.a)(Object(g.a)({},e),{},{users:Mt(e.users,t.userId,"id",{followed:!1})});case Ft:return Object(g.a)(Object(g.a)({},e),{},{users:t.users});case Ut:return Object(g.a)(Object(g.a)({},e),{},{currentPage:t.currentPage});case Nt:return Object(g.a)(Object(g.a)({},e),{},{totalUsersCount:t.totalUsersCount});case Tt:return Object(g.a)(Object(g.a)({},e),{},{isFetching:t.isFetching});case Lt:return Object(g.a)(Object(g.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(it.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:case le:return Object(g.a)(Object(g.a)({},e),t.payload);case ue:return Object(g.a)(Object(g.a)({},e),{},{errorMessage:t.errorMessage});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return Object(g.a)(Object(g.a)({},e),{},{initialized:!0});default:return e}}}),yn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Pt.d,kn=Object(Pt.e)(wn,yn(Object(Pt.a)(vn.a)));c.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(tn.a,{basename:"/social_network",children:Object(L.jsx)(W.a,{store:kn,children:Object(L.jsx)(xn,{})})})}),document.getElementById("root"))},29:function(e,t,n){"use strict";t.a=n.p+"static/media/avatar.4084d3ab.svg"},59:function(e,t,n){e.exports={bgImg:"profileInfo_bgImg__3Ay7A",descriptionBlock:"profileInfo_descriptionBlock__2S594",avatar:"profileInfo_avatar__zeCMj",contact:"profileInfo_contact__3jMB8",error:"profileInfo_error__3iHhv"}},98:function(e,t,n){e.exports={postsBlock:"myPosts_postsBlock__3pXvt",posts:"myPosts_posts__obZMe"}},99:function(e,t,n){e.exports={formControl:"addMessageForm_formControl__2AMq-",error:"addMessageForm_error__mgWRR"}}},[[185,1,2]]]);
//# sourceMappingURL=main.282d9a11.chunk.js.map