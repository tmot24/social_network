(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[3],{268:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(17),s=r(99),i=r(7);function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=r(19),u=r(1),b=function(e){return{isAuth:e.auth.isAuth}};var j=r(43),d=r(249),m=r(2),f=r(3),h=(r(6),r(4)),O=r(5),g=r(44),p=Object(g.a)(n.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var x,v=n.forwardRef((function(e,t){var r=e.alt,a=e.children,c=e.classes,s=e.className,i=e.component,o=void 0===i?"div":i,l=e.imgProps,u=e.sizes,b=e.src,j=e.srcSet,d=e.variant,O=void 0===d?"circle":d,g=Object(f.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),x=null,v=function(e){var t=e.src,r=e.srcSet,a=n.useState(!1),c=a[0],s=a[1];return n.useEffect((function(){if(t||r){s(!1);var e=!0,n=new Image;return n.src=t,n.srcSet=r,n.onload=function(){e&&s("loaded")},n.onerror=function(){e&&s("error")},function(){e=!1}}}),[t,r]),c}({src:b,srcSet:j}),y=b||j,S=y&&"error"!==v;return x=S?n.createElement("img",Object(m.a)({alt:r,src:b,srcSet:j,sizes:u,className:c.img},l)):null!=a?a:y&&r?r[0]:n.createElement(p,{className:c.fallback}),n.createElement(o,Object(m.a)({className:Object(h.a)(c.root,c.system,c[O],s,!S&&c.colorDefault),ref:t},g),x)})),y=Object(O.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(v),S=r(69),w=r(235),N=r(231),k=r(31),E=Object(N.a)((function(e){return{root:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},text:{margin:e.spacing(1),flexGrow:1},body:{display:"flex",justifyContent:"flex-end"}}})),R=a.a.memo((function(e){var t=e.message,r=Object(k.a)(),n=E(r);return Object(u.jsxs)(d.a,{container:!0,className:n.root,children:[Object(u.jsx)(d.a,{item:!0,children:Object(u.jsx)(y,{alt:"img",src:t.photo||j.a})}),Object(u.jsxs)(d.a,{item:!0,className:n.text,children:[Object(u.jsx)(S.a,{variant:"subtitle1",children:t.userName}),Object(u.jsx)(S.a,{className:n.body,variant:"body1",children:t.message}),Object(u.jsx)(w.a,{variant:"fullWidth"})]})]})})),z=r(98),A=Object(N.a)((function(e){return{root:{padding:e.spacing(1),height:400,overflowY:"auto"}}})),P=function(){var e=Object(c.d)((function(e){return e.chat.messages})),t=Object(n.useRef)(null),r=Object(k.a)(),a=A(r);return Object(n.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.scrollTo(0,99999)}),[e]),Object(u.jsx)(z.a,{className:a.root,elevation:10,ref:t,children:e.map((function(e,t){return Object(u.jsx)(R,{message:e},e.id)}))})},C=r(263),F=r(241),I=r(60),M=r(28),T=Object(N.a)((function(e){return{button:{display:"flex",justifyContent:"flex-end"}}})),D=function(){var e=Object(c.c)(),t=Object(c.d)((function(e){return e.chat.status})),r=Object(k.a)(),n=T(r);return Object(u.jsx)("div",{children:Object(u.jsx)(M.c,{initialValues:{message:""},validate:function(e){var t={};return 0===e.message.length&&(t.message="Message should be more 1 symbols"),t},onSubmit:function(t,r){var n,a=r.setSubmitting,c=r.resetForm;a(!1),c(),n=t.message,e(Object(s.b)(n))},children:function(e){var r=e.submitForm,a=e.isSubmitting;return Object(u.jsxs)(M.b,{children:[Object(u.jsx)(C.a,{margin:1,children:Object(u.jsx)(M.a,{fullWidth:!0,component:I.c,name:"message",type:"message",label:"Message",helperText:"Enter your message",variant:"outlined"})}),Object(u.jsx)(C.a,{margin:1,className:n.button,children:Object(u.jsx)(F.a,{variant:"contained",color:"primary",disabled:a||"ready"!==t,onClick:r,children:"Submit"})})]})}})})},W=Object(N.a)((function(e){return{root:{margin:e.spacing(1),padding:e.spacing(2),flexDirection:"row"}}}));t.default=(x=function(){var e=Object(c.c)(),t=Object(c.d)((function(e){return e.chat.status}));Object(n.useEffect)((function(){return e(Object(s.c)()),function(){e(Object(s.d)())}}),[e]);var r=Object(k.a)(),a=W(r);return Object(u.jsxs)(d.a,{container:!0,children:[Object(u.jsxs)(d.a,{item:!0,sm:5,xs:12,children:["error"===t&&Object(u.jsx)("div",{children:"Some error occurred. Please refresh the page"}),Object(u.jsxs)(z.a,{className:a.root,children:[Object(u.jsx)(P,{}),Object(u.jsx)(D,{})]})]}),Object(u.jsx)(d.a,{item:!0,sm:7,xs:12,children:Object(u.jsx)(z.a,{className:a.root,children:Object(u.jsx)(S.a,{variant:"h6",children:"\u0427\u0430\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e WebSocket. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \u0441\u0430\u0439\u0442\u0430 \u0438 \u043f\u043e\u043e\u0431\u0449\u0430\u0442\u044c\u0441\u044f \u0441 \u0441\u0430\u043c\u0438\u043c \u0441\u043e\u0431\u043e\u0439 \ud83d\ude00"})})})]})},Object(c.b)(b,{})((function(e){var t=e.isAuth,r=o(e,["isAuth"]);return t?Object(u.jsx)(x,Object(i.a)({},r)):Object(u.jsx)(l.a,{to:"/"})})))}}]);
//# sourceMappingURL=3.3e4b0e6e.chunk.js.map