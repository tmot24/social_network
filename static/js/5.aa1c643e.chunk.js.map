{"version":3,"sources":["components/content/common/paginator/paginator.module.css","components/content/users/users.module.css","components/content/common/paginator/paginator.js","components/content/users/user.js","components/content/users/users.js","../node_modules/reselect/es/index.js","components/content/users/usersSelectors.js","components/content/users/usersContainer.js"],"names":["module","exports","Paginator","totalItemsCount","pageSize","currentPage","onPageChanged","portionSize","useState","portionNumber","setPortionNumber","pagesCount","Math","ceil","pages","Array","from","length","_","k","portionCount","leftPortionPageNumber","rightPortionPageNumber","className","styles","paginator","onClick","filter","p","map","selectedPage","User","user","followingInProgress","follow","unfollow","to","id","src","photos","small","avatar","userPhoto","alt","followed","disabled","some","userId","name","status","Users","totalUsersCount","users","defaultEqualityCheck","a","b","areArgumentsShallowlyEqual","equalityCheck","prev","next","i","getDependencies","funcs","dependencies","isArray","every","dep","dependencyTypes","join","Error","createSelector","memoize","_len","arguments","memoizeOptions","_key","_len2","_key2","recomputations","resultFunc","pop","memoizedResultFunc","apply","undefined","concat","selector","params","push","resetRecomputations","createSelectorCreator","func","lastArgs","lastResult","getUsersSelector","state","usersPage","mapDispatchToProps","toggleFollowingProgress","getUsersThunkCreator","connect","isFetching","useEffect","pageNumber"],"mappings":"oGACAA,EAAOC,QAAU,CAAC,UAAY,6BAA6B,aAAe,kC,mBCA1ED,EAAOC,QAAU,CAAC,UAAY,yBAAyB,aAAe,8B,kGCEzDC,EAAY,SAAC,GAA+E,IAA9EC,EAA6E,EAA7EA,gBAAiBC,EAA4D,EAA5DA,SAAUC,EAAkD,EAAlDA,YAAaC,EAAqC,EAArCA,cAAqC,IAAtBC,mBAAsB,MAAR,GAAQ,IAC1DC,mBAAS,GADiD,mBAC7FC,EAD6F,KAC9EC,EAD8E,KAG9FC,EAAaC,KAAKC,KAAKV,EAAkBC,GACzCU,EAAQC,MAAMC,KAAK,CAACC,OAAQN,IAAa,SAACO,EAAGC,GAAJ,OAAUA,EAAI,KACvDC,EAAeR,KAAKC,KAAKF,EAAaJ,GACtCc,GAAyBZ,EAAgB,GAAKF,EAAc,EAC5De,EAAyBb,EAAgBF,EAE/C,OACI,sBAAKgB,UAAWC,IAAOC,UAAvB,UACMhB,EAAgB,GAClB,gCACI,wBAAQiB,QAAS,WAAQhB,EAAiB,IAA1C,mBACA,wBAAQgB,QAAS,WAAQhB,EAAiBD,EAAgB,IAA1D,qBAIAK,EACKa,QAAO,SAAAC,GAAC,OAAIA,GAAKP,GAAyBO,GAAGN,KAC7CO,KAAI,SAAAD,GAAC,OACN,wBAAgBL,UAAWlB,IAAgBuB,EAAIJ,IAAOM,aAAe,KAC7DJ,QAAS,kBAAMpB,EAAcsB,IADrC,SAEEA,GAFWA,MAMjBR,EAAeX,GACf,gCACI,wBAAQiB,QAAS,WAAQhB,EAAiBD,EAAgB,IAA1D,kBACA,wBAAQiB,QAAS,WAAQhB,EAAiBU,IAA1C,yB,iCC5BPW,EAAO,SAAC,GAAmD,IAAlDC,EAAiD,EAAjDA,KAAMC,EAA2C,EAA3CA,oBAAqBC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,SACrD,OACI,gCACI,gCACI,8BACI,cAAC,IAAD,CAASC,GAAE,mBAAcJ,EAAKK,IAA9B,SACI,qBAAKC,IAAKN,EAAKO,OAAOC,MAAQR,EAAKO,OAAOC,MAAQC,IAC7ClB,UAAWC,IAAOkB,UAClBC,IAAK,YAGlB,8BACKX,EAAKY,SACA,wBAAQC,SAAUZ,EAAoBa,MAAK,SAAAC,GAAM,OAAIA,IAAWf,EAAKK,MAC7DX,QAAS,kBAAMS,EAASH,EAAKK,KADrC,sBAGA,wBAAQQ,SAAUZ,EAAoBa,MAAK,SAAAC,GAAM,OAAIA,IAAWf,EAAKK,MAC7DX,QAAS,kBAAMQ,EAAOF,EAAKK,KADnC,yBAMd,gCACI,8BAAML,EAAKgB,OACX,8BAAMhB,EAAKiB,gBC1BdC,EAAQ,SAAC,GAGO,IAFHC,EAEE,EAFFA,gBAAiB/C,EAEf,EAFeA,SAAUC,EAEzB,EAFyBA,YAAaC,EAEtC,EAFsCA,cAAe4B,EAErD,EAFqDA,OAAQC,EAE7D,EAF6DA,SAC/DiB,EACE,EADFA,MAAOnB,EACL,EADKA,oBAG7B,OACI,gCACI,cAAC,EAAD,CAAW9B,gBAAiBgD,EAAiB/C,SAAUA,EAAUC,YAAaA,EACnEC,cAAeA,IAEtB8C,EAAMvB,KAAI,SAAAG,GAAI,OACV,8BACI,cAAC,EAAD,CAAMA,KAAMA,EAAMC,oBAAqBA,EACjCC,OAAQA,EAAQC,SAAUA,KAF1BH,EAAKK,W,QCdnC,SAASgB,EAAqBC,EAAGC,GAC/B,OAAOD,IAAMC,EAGf,SAASC,EAA2BC,EAAeC,EAAMC,GACvD,GAAa,OAATD,GAA0B,OAATC,GAAiBD,EAAKzC,SAAW0C,EAAK1C,OACzD,OAAO,EAKT,IADA,IAAIA,EAASyC,EAAKzC,OACT2C,EAAI,EAAGA,EAAI3C,EAAQ2C,IAC1B,IAAKH,EAAcC,EAAKE,GAAID,EAAKC,IAC/B,OAAO,EAIX,OAAO,EAoBT,SAASC,EAAgBC,GACvB,IAAIC,EAAehD,MAAMiD,QAAQF,EAAM,IAAMA,EAAM,GAAKA,EAExD,IAAKC,EAAaE,OAAM,SAAUC,GAChC,MAAsB,oBAARA,KACZ,CACF,IAAIC,EAAkBJ,EAAalC,KAAI,SAAUqC,GAC/C,cAAcA,KACbE,KAAK,MACR,MAAM,IAAIC,MAAM,wGAAgHF,EAAkB,KAGpJ,OAAOJ,EAiDF,IAAIO,EA9CJ,SAA+BC,GACpC,IAAK,IAAIC,EAAOC,UAAUxD,OAAQyD,EAAiB3D,MAAMyD,EAAO,EAAIA,EAAO,EAAI,GAAIG,EAAO,EAAGA,EAAOH,EAAMG,IACxGD,EAAeC,EAAO,GAAKF,UAAUE,GAGvC,OAAO,WACL,IAAK,IAAIC,EAAQH,UAAUxD,OAAQ6C,EAAQ/C,MAAM6D,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACjFf,EAAMe,GAASJ,UAAUI,GAG3B,IAAIC,EAAiB,EACjBC,EAAajB,EAAMkB,MACnBjB,EAAeF,EAAgBC,GAE/BmB,EAAqBV,EAAQW,WAAMC,EAAW,CAAC,WAGjD,OAFAL,IAEOC,EAAWG,MAAM,KAAMT,aAC7BW,OAAOV,IAGNW,EAAWd,GAAQ,WAIrB,IAHA,IAAIe,EAAS,GACTrE,EAAS8C,EAAa9C,OAEjB2C,EAAI,EAAGA,EAAI3C,EAAQ2C,IAE1B0B,EAAOC,KAAKxB,EAAaH,GAAGsB,MAAM,KAAMT,YAI1C,OAAOQ,EAAmBC,MAAM,KAAMI,MAWxC,OARAD,EAASN,WAAaA,EACtBM,EAAStB,aAAeA,EACxBsB,EAASP,eAAiB,WACxB,OAAOA,GAETO,EAASG,oBAAsB,WAC7B,OAAOV,EAAiB,GAEnBO,GAIiBI,EA9ErB,SAAwBC,GAC7B,IAAIjC,EAAgBgB,UAAUxD,OAAS,QAAsBkE,IAAjBV,UAAU,GAAmBA,UAAU,GAAKpB,EAEpFsC,EAAW,KACXC,EAAa,KAEjB,OAAO,WAOL,OANKpC,EAA2BC,EAAekC,EAAUlB,aAEvDmB,EAAaF,EAAKR,MAAM,KAAMT,YAGhCkB,EAAWlB,UACJmB,MC/BX,IAIaC,EACTvB,GALa,SAACwB,GACd,OAAOA,EAAMC,UAAU3C,SAIE,SAACA,GACtB,OAAOA,KC4CT4C,EAAqB,CACvB9D,WAAQC,aAAU8D,4BAAyBC,0BAGhCC,uBAfS,SAACL,GACrB,MAAO,CACH1C,MAAOyC,EAAiBC,GACxB1F,SAAU0F,EAAMC,UAAU3F,SAC1B+C,gBAAiB2C,EAAMC,UAAU5C,gBACjC9C,YAAayF,EAAMC,UAAU1F,YAC7B+F,WAAYN,EAAMC,UAAUK,WAC5BnE,oBAAqB6D,EAAMC,UAAU9D,uBAQL+D,EAAzBG,EA/CQ,SAAC,GAIO,IAHHjE,EAGE,EAHFA,OAAQC,EAGN,EAHMA,SAAUiB,EAGhB,EAHgBA,MAAOhD,EAGvB,EAHuBA,SAAU+C,EAGjC,EAHiCA,gBAAiB9C,EAGlD,EAHkDA,YACpD+F,EAEE,EAFFA,WAAYH,EAEV,EAFUA,wBACZhE,EACE,EADFA,oBAAqBiE,EACnB,EADmBA,qBAG7CG,qBAAU,WACNH,EAAqB7F,EAAaD,KACnC,CAACC,EAAa6F,EAAsB9F,IAMvC,OACI,qCACKgG,EAAa,cAAC,IAAD,IAAe,KAC7B,cAAC,EAAD,CACIjD,gBAAiBA,EACjB/C,SAAUA,EACVC,YAAaA,EACbC,cAXU,SAACgG,GACnBJ,EAAqBI,EAAYlG,IAWzB8B,OAAQA,EACRC,SAAUA,EACViB,MAAOA,EACP6C,wBAAyBA,EACzBhE,oBAAqBA","file":"static/js/5.aa1c643e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"paginator_paginator__3rETt\",\"selectedPage\":\"paginator_selectedPage__3hMHp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"users_userPhoto__2Iaez\",\"selectedPage\":\"users_selectedPage__1u_af\"};","import styles from \"./paginator.module.css\";\r\nimport {useState} from \"react\";\r\n\r\nexport const Paginator = ({totalItemsCount, pageSize, currentPage, onPageChanged, portionSize = 10}) => {\r\n    const [portionNumber, setPortionNumber] = useState(1);\r\n\r\n    const pagesCount = Math.ceil(totalItemsCount / pageSize);\r\n    const pages = Array.from({length: pagesCount}, (_, k) => k + 1);\r\n    const portionCount = Math.ceil(pagesCount / portionSize);\r\n    const leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    const rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n    return (\r\n        <div className={styles.paginator}>\r\n            { portionNumber > 1 &&\r\n            <div>\r\n                <button onClick={() => { setPortionNumber(1)}}>First</button>\r\n                <button onClick={() => { setPortionNumber(portionNumber - 1) }}>Prev</button>\r\n            </div>\r\n            }\r\n            {\r\n                pages\r\n                    .filter(p => p >= leftPortionPageNumber && p<=rightPortionPageNumber)\r\n                    .map(p =>\r\n                    <button key={p} className={currentPage === p ? styles.selectedPage : null}\r\n                            onClick={() => onPageChanged(p)}\r\n                    >{p}</button>\r\n                )\r\n            }\r\n            {\r\n                portionCount > portionNumber &&\r\n                <div>\r\n                    <button onClick={() => { setPortionNumber(portionNumber + 1) }}>Next</button>\r\n                    <button onClick={() => { setPortionNumber(portionCount) }}>Last</button>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n};","import {NavLink} from \"react-router-dom\";\r\nimport avatar from \"../../../assets/images/default_avatar.jpg\";\r\nimport styles from \"./users.module.css\";\r\n\r\n\r\nexport const User = ({user, followingInProgress, follow, unfollow}) => {\r\n    return (\r\n        <div>\r\n            <div>\r\n                <div>\r\n                    <NavLink to={`/profile/${user.id}`}>\r\n                        <img src={user.photos.small ? user.photos.small : avatar}\r\n                             className={styles.userPhoto}\r\n                             alt={\"img\"}/>\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                    {user.followed\r\n                        ? <button disabled={followingInProgress.some(userId => userId === user.id)}\r\n                                  onClick={() => unfollow(user.id)}\r\n                        >Unfollow</button>\r\n                        : <button disabled={followingInProgress.some(userId => userId === user.id)}\r\n                                  onClick={() => follow(user.id)}\r\n                        >Follow</button>\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div>{user.name}</div>\r\n                <div>{user.status}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};","import {Paginator} from \"../common/paginator/paginator\";\r\nimport {User} from \"./user\";\r\n\r\nexport const Users = ({\r\n                          totalUsersCount, pageSize, currentPage, onPageChanged, follow, unfollow,\r\n                          users, followingInProgress\r\n                      }) => {\r\n\r\n    return (\r\n        <div>\r\n            <Paginator totalItemsCount={totalUsersCount} pageSize={pageSize} currentPage={currentPage}\r\n                       onPageChanged={onPageChanged}/>\r\n            {\r\n                users.map(user => (\r\n                    <div key={user.id}>\r\n                        <User user={user} followingInProgress={followingInProgress}\r\n                              follow={follow} unfollow={unfollow}/>\r\n                    </div>)\r\n                )\r\n            }\r\n        </div>\r\n    );\r\n};","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nexport var createSelector = createSelectorCreator(defaultMemoize);\n\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import {createSelector} from \"reselect\";\r\n\r\nconst getUsers = (state) => {\r\n    return state.usersPage.users;\r\n};\r\n\r\nexport const getUsersSelector =\r\n    createSelector(getUsers, (users) => {\r\n        return users;\r\n    });","import {connect} from \"react-redux\";\r\nimport {\r\n    toggleFollowingProgress, getUsersThunkCreator, follow, unfollow\r\n} from \"../../../redux/users-reducer\";\r\nimport {useEffect} from \"react\";\r\nimport {Users} from \"./users\";\r\nimport {Preloader} from \"../common/preloader/preloader\";\r\nimport {getUsersSelector} from \"./usersSelectors\";\r\n\r\nconst UsersContainer = ({\r\n                            follow, unfollow, users, pageSize, totalUsersCount, currentPage,\r\n                            isFetching, toggleFollowingProgress,\r\n                            followingInProgress, getUsersThunkCreator,\r\n                        }) => {\r\n\r\n    useEffect(() => {\r\n        getUsersThunkCreator(currentPage, pageSize);\r\n    }, [currentPage, getUsersThunkCreator, pageSize]);\r\n\r\n    const onPageChanged = (pageNumber) => {\r\n        getUsersThunkCreator(pageNumber, pageSize);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {isFetching ? <Preloader/> : null}\r\n            <Users\r\n                totalUsersCount={totalUsersCount}\r\n                pageSize={pageSize}\r\n                currentPage={currentPage}\r\n                onPageChanged={onPageChanged}\r\n                follow={follow}\r\n                unfollow={unfollow}\r\n                users={users}\r\n                toggleFollowingProgress={toggleFollowingProgress}\r\n                followingInProgress={followingInProgress}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsersSelector(state),\r\n        pageSize: state.usersPage.pageSize,\r\n        totalUsersCount: state.usersPage.totalUsersCount,\r\n        currentPage: state.usersPage.currentPage,\r\n        isFetching: state.usersPage.isFetching,\r\n        followingInProgress: state.usersPage.followingInProgress,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    follow, unfollow, toggleFollowingProgress, getUsersThunkCreator,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersContainer);"],"sourceRoot":""}