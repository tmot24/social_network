(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[0],{110:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return j}));var r=n(7),a=n(84),c=n(19),s=n(141),i=n(191),o=n(50),u=n(2),l=function(e){var t=e.sendMessage,n=e.maxLength,c=Object(a.a)(),s=c.register,i=c.handleSubmit,o=c.formState.errors;return Object(u.jsx)("form",{onSubmit:i((function(e){t(e.newMessageBody)})),children:Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)("textarea",Object(r.a)({placeholder:"Enter your message"},s("newMessageBody",{required:"Field is required",maxLength:{value:n,message:"Max length is ".concat(n," symbols")}})))}),o.newMessageBody&&Object(u.jsx)("span",{children:o.newMessageBody.message}),Object(u.jsx)("input",{type:"submit",value:"Send"})]})})},j=function(e){var t=e.sendMessage;return Object(u.jsx)(c.c,{initialValues:{input:""},onSubmit:function(e){return t(e.input)},children:function(e){var t=e.submitForm,n=e.isSubmitting;return Object(u.jsx)(c.b,{children:Object(u.jsxs)(s.a,{children:[Object(u.jsx)(c.a,{component:o.c,name:"input",label:"Add new post",helperText:"Enter your message",style:{width:250}}),Object(u.jsx)(s.a,{style:{display:"flex",justifyContent:"flex-end"},children:Object(u.jsx)(i.a,{onClick:t,disabled:n,children:"Send"})})]})})}})}},111:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(20),a=n(7),c=n(35),s={dataDialog:[{id:1,name:"Dimych",img:c.a},{id:2,name:"Andrey",img:c.a},{id:3,name:"Sveta",img:c.a},{id:4,name:"Sasha",img:c.a},{id:5,name:"Victor",img:c.a},{id:6,name:"Valera",img:c.a}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you?"},{id:3,message:"Yo"},{id:4,message:"Yo"},{id:5,message:"Yo"}]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":var n=t.newMessageBody;return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:6,message:n}])});default:return e}},o={sendMessage:function(e){return{type:"SEND_MESSAGE",newMessageBody:e}}}},186:function(e,t,n){"use strict";n.r(t);var r,a,c=n(0),s=n.n(c),i=n(12),o=n.n(i),u=n(15),l=n(17),j=n(224),d=n(237),b=n(238),O=n(227),h=n(67),f=n(191),p=n(126),g=n.n(p),x=n(25),m=n(7),v=n(4),w=n(27),S=n(249),y=n(228),C=n(229),k=n(190),P=n(230),E=n(231),I=n(117),T=n.n(I),_=n(116),U=n.n(_),F=n(118),A=n.n(F),N=n(119),M=n.n(N),L=n(120),R=n.n(L),D=n(2),z=Object(j.a)((function(e){return{drawer:{width:xe,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:xe,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},toolbar:Object(m.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)}})),G=function(e){var t,n,r=e.handleDrawerClose,a=e.open,c=Object(w.a)(),s=z(c),i=Object(l.g)();return Object(D.jsxs)(S.a,{variant:"permanent",className:Object(v.a)(s.drawer,(t={},Object(x.a)(t,s.drawerOpen,a),Object(x.a)(t,s.drawerClose,!a),t)),classes:{paper:Object(v.a)((n={},Object(x.a)(n,s.drawerOpen,a),Object(x.a)(n,s.drawerClose,!a),n))},children:[Object(D.jsx)("div",{className:s.toolbar,children:Object(D.jsx)(O.a,{onClick:r,children:"rtl"===c.direction?Object(D.jsx)(U.a,{}):Object(D.jsx)(T.a,{})})}),Object(D.jsx)(y.a,{}),Object(D.jsxs)(C.a,{children:[Object(D.jsxs)(k.a,{button:!0,onClick:function(){return i.push("/profile")},children:[Object(D.jsx)(P.a,{children:Object(D.jsx)(A.a,{})}),Object(D.jsx)(E.a,{primary:"Profile"})]}),Object(D.jsxs)(k.a,{button:!0,onClick:function(){return i.push("/dialogs")},children:[Object(D.jsx)(P.a,{children:Object(D.jsx)(M.a,{})}),Object(D.jsx)(E.a,{primary:"Dialogs"})]}),Object(D.jsxs)(k.a,{button:!0,onClick:function(){return i.push("/users")},children:[Object(D.jsx)(P.a,{children:Object(D.jsx)(R.a,{})}),Object(D.jsx)(E.a,{primary:"Users"})]})]})]})},B=n(127),W=n.n(B),J=n(125),V=n.n(J),H=n(26),q=n(9),Z=n.n(q),Y=n(13),X=n(122),K=n.n(X).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"b45f20e6-c418-486d-bf45-21bf8191b135"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r||(r={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(a||(a={}));var $=function(){return K.get("auth/me").then((function(e){return e.data}))},Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return K.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},ee=function(){return K.delete("auth/login")},te=function(){return K.get("security/get-captcha-url").then((function(e){return e.data}))},ne={userId:null,email:null,login:null,isAuth:!1,errorMessage:null,captchaUrl:void 0},re=function(e,t,n,r){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:r}}},ae=function(e){return{type:"GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},ce=function(e){return{type:"SET_ERROR_LOGIN",errorMessage:e}},se=function(){return function(){var e=Object(Y.a)(Z.a.mark((function e(t){var n,a,c,s,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:(n=e.sent).resultCode===r.Success&&(a=n.data,c=a.id,s=a.login,i=a.email,t(re(c,i,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ie=function(){return function(){var e=Object(Y.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:n=e.sent,r=n.url,t(ae(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},oe=n(233),ue=n(234),le=n(235),je=n(141),de=n(232),be=n(236),Oe=n(19),he=n(50),fe=function(e){var t=e.errorMessage,n=e.login,r=e.captchaUrl,a=Object(c.useState)(!1),s=Object(u.a)(a,2),i=s[0],o=s[1],l=function(){o(!1)};return Object(D.jsxs)("div",{children:[Object(D.jsx)(f.a,{variant:"outlined",color:"secondary",onClick:function(){o(!0)},children:"Login"}),Object(D.jsxs)(oe.a,{open:i,onClose:l,"aria-labelledby":"form-dialog-title",children:[Object(D.jsx)(ue.a,{id:"form-dialog-title",children:"Login"}),Object(D.jsxs)(le.a,{children:[Object(D.jsx)(h.a,{variant:"subtitle1",children:"Please use test email: "}),Object(D.jsx)(h.a,{variant:"h4",children:"free@samuraijs.com"}),Object(D.jsx)(h.a,{variant:"subtitle1",children:"Please use test password: "}),Object(D.jsx)(h.a,{variant:"h4",children:"free"}),Object(D.jsx)(Oe.c,{initialValues:{email:"free@samuraijs.com",password:"free",rememberMe:!1,captcha:void 0},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(e){var t;n((t=e).email,t.password,t.rememberMe,t.captcha)},children:Object(D.jsxs)(Oe.b,{children:[Object(D.jsx)(je.a,{margin:1,children:Object(D.jsx)(Oe.a,{component:he.c,name:"email",type:"email",label:"Email",helperText:"email"})}),Object(D.jsx)(je.a,{margin:1,children:Object(D.jsx)(Oe.a,{component:he.c,type:"password",label:"Password",name:"password"})}),Object(D.jsx)(je.a,{margin:1,children:Object(D.jsx)(de.a,{control:Object(D.jsx)(Oe.a,{component:he.b,type:"checkbox",name:"rememberMe"}),label:"Remember me"})}),Object(D.jsxs)(je.a,{margin:1,children:[r&&Object(D.jsx)("img",{style:{display:"inherit"},src:r,alt:"captcha"}),r&&Object(D.jsx)(Oe.a,{component:he.c,type:"captcha",label:"Captcha",name:"captcha"}),t&&Object(D.jsx)(je.a,{margin:2,children:Object(D.jsx)(h.a,{variant:"subtitle1",style:{color:"red",backgroundColor:"white"},children:t})})]}),Object(D.jsxs)(be.a,{children:[Object(D.jsx)(f.a,{onClick:l,children:"Cancel"}),Object(D.jsx)(f.a,{type:"submit",children:"Login"})]})]})})]})]})]})},pe={login:function(e,t,n,c){return function(){var s=Object(Y.a)(Z.a.mark((function s(i){return Z.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:Q(e,t,n,c).then((function(e){e.resultCode===r.Success?i(se()):(e.resultCode===a.CaptchaIsRequired&&i(ie()),i(ce(e.messages[0])))}));case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}},ge=Object(H.b)((function(e){return{errorMessage:e.auth.errorMessage,captchaUrl:e.auth.captchaUrl}}),pe)((function(e){var t=e.login,n=e.errorMessage,r=e.captchaUrl;return Object(D.jsx)(fe,{errorMessage:n,login:t,captchaUrl:r})})),xe=200,me=Object(j.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:36},hide:{display:"none"},toolbar:{justifyContent:"space-between"},title:{marginLeft:20,color:"black",cursor:"pointer"},login:{display:"flex",alignItems:"center"},empty:{flexGrow:1},name:{marginRight:12}}})),ve=function(e){var t=e.isAuth,n=e.login,r=e.logout,a=e.darkMode,s=e.setDarkMode,i=me(),o=Object(c.useState)(!1),j=Object(u.a)(o,2),p=j[0],x=j[1],m=Object(l.g)(),v=function(){x(!1)};return Object(D.jsxs)("div",{className:i.root,children:[Object(D.jsx)(d.a,{position:"fixed",className:i.appBar,children:Object(D.jsxs)(b.a,{className:i.toolbar,children:[p?Object(D.jsx)(O.a,{onClick:v,color:"inherit",edge:"start",children:Object(D.jsx)(V.a,{})}):Object(D.jsx)(O.a,{color:"inherit",onClick:function(){x(!0)},edge:"start",children:Object(D.jsx)(g.a,{})}),Object(D.jsx)(h.a,{onClick:function(){return m.push("/")},variant:"h6",noWrap:!0,className:i.title,children:"Social network"}),Object(D.jsx)("div",{className:i.empty}),Object(D.jsxs)("div",{className:i.login,children:[Object(D.jsx)(O.a,{color:"secondary",onClick:function(){return s(!a)},children:Object(D.jsx)(W.a,{})}),Object(D.jsx)("div",{children:t?Object(D.jsxs)("div",{className:i.login,children:[Object(D.jsx)(h.a,{className:i.name,variant:"h6",children:n}),Object(D.jsx)(f.a,{color:"secondary",variant:"outlined",onClick:r,children:"Log out"})]}):Object(D.jsx)(ge,{})})]})]})}),Object(D.jsx)(G,{open:p,handleDrawerClose:v})]})},we={logout:function(){return function(){var e=Object(Y.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:e.sent.data.resultCode===r.Success&&t(re(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Se=Object(H.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),we)((function(e){var t=e.isAuth,n=e.login,r=e.logout,a=e.darkMode,c=e.setDarkMode;return Object(D.jsx)(ve,{isAuth:t,login:n,logout:r,darkMode:a,setDarkMode:c})})),ye={initialized:!1},Ce=function(){return{type:"INITIALIZED_SUCCESS"}},ke=n(239),Pe=function(){var e=Object(w.a)();return Object(D.jsx)(ke.a,{style:{backgroundColor:"#303030",marginBottom:e.spacing(2)}})},Ee=n.p+"static/media/welcome-home-welcome-home-de.842af542.jpg",Ie=Object(j.a)({root:{height:"80vh"}}),Te=function(){var e=Ie();return Object(D.jsx)("div",{children:Object(D.jsx)("img",{className:e.root,src:Ee,alt:"welcome"})})},_e=function(){return Object(D.jsx)("div",{children:"Not Found"})},Ue=n(65),Fe=n(66),Ae=n(137),Ne=n(136),Me=function(e){Object(Ae.a)(n,e);var t=Object(Ne.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return Object(Fe.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0}),console.log(t)}},{key:"render",value:function(){return this.state.error?Object(D.jsx)("img",{src:"https://miro.medium.com/max/700/1*v4dLIlWpJkCiSDKv7xguLA.png",alt:"error"}):this.props.children}}]),n}(s.a.Component),Le=n(247),Re=n(248),De=n(242),ze=n(135),Ge=function(e){var t=e.profile,n=e.status,r=e.updateUserStatus,a=e.isOwner,s=Object(c.useState)(!1),i=Object(u.a)(s,2),o=i[0],l=i[1],j=Object(c.useState)(),d=Object(u.a)(j,2),b=d[0],O=d[1];Object(c.useEffect)((function(){O(n)}),[n]);return t?Object(D.jsx)("div",{children:o?Object(D.jsx)("div",{children:Object(D.jsx)("input",{onChange:function(e){O(e.currentTarget.value)},autoFocus:!0,onBlur:function(){return l(!1),void r(b)},type:"text",defaultValue:b})}):Object(D.jsx)("div",{children:Object(D.jsxs)("div",{children:[Object(D.jsx)("b",{children:"Status: "}),Object(D.jsx)("span",{onDoubleClick:a?function(){l(!0)}:void 0,children:b||"No status"})]})})}):Object(D.jsx)(Pe,{})},Be=n(35),We=n(84),Je=function(e){var t=e.profile,n=e.saveProfile,r=e.setEditMode,a=Object(c.useState)([]),s=Object(u.a)(a,2),i=s[0],o=s[1],l=Object(We.a)({defaultValues:{fullName:t.fullName,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,aboutMe:t.aboutMe,contacts:{facebook:t.contacts.facebook,website:t.contacts.website,vk:t.contacts.vk,twitter:t.contacts.twitter,instagram:t.contacts.instagram,youtube:t.contacts.youtube,github:t.contacts.github,mainLink:t.contacts.mainLink}}}),j=l.register,d=l.handleSubmit;return Object(D.jsx)("form",{onSubmit:d((function(e){n(e).then((function(){return r(!1)})).catch((function(e){return o(e)}))})),children:Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:Object(D.jsx)("button",{children:"save"})}),i.map((function(e){return Object(D.jsx)("div",{children:e},e)})),Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("b",{children:"Full name: "}),Object(D.jsx)("div",{children:Object(D.jsx)("input",Object(m.a)({type:"text",placeholder:"Full name"},j("fullName")))})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("b",{children:"Looking for a job: "}),Object(D.jsx)("div",{children:Object(D.jsx)("input",Object(m.a)({type:"checkbox"},j("lookingForAJob")))})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("b",{children:"My professional skills: "}),Object(D.jsx)("div",{children:Object(D.jsx)("textarea",Object(m.a)({placeholder:"My professional skills"},j("lookingForAJobDescription")))})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("b",{children:"About me: "}),Object(D.jsx)("div",{children:Object(D.jsx)("textarea",Object(m.a)({placeholder:"About me"},j("aboutMe")))})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("b",{children:"Contacts: "}),Object(D.jsx)("div",{children:Object.keys(t.contacts).map((function(e){return Object(D.jsxs)("div",{children:[Object(D.jsxs)("b",{children:[e,": "]}),Object(D.jsx)("input",Object(m.a)({type:"text",placeholder:e},j("contacts.".concat(e))))]},e)}))})]})]})]})})},Ve=function(e){var t=e.profile,n=e.status,r=e.updateUserStatus,a=e.isOwner,s=e.savePhoto,i=e.saveProfile,o=Object(c.useState)(!1),l=Object(u.a)(o,2),j=l[0],d=l[1];return t?Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("img",{src:t.photos.large||Be.a,alt:"img"}),j?Object(D.jsx)(Je,{profile:t,saveProfile:i,setEditMode:d}):Object(D.jsx)(He,{profile:t,goToEditMode:function(){return d(!0)},isOwner:a}),Object(D.jsx)(Ge,{profile:t,status:n,updateUserStatus:r,isOwner:a})]}),a&&Object(D.jsx)("input",{type:"file",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&s(e.target.files[0])}})]}):Object(D.jsx)(Pe,{})},He=function(e){var t=e.profile,n=e.isOwner,r=e.goToEditMode;return Object(D.jsxs)("div",{children:[n&&Object(D.jsx)("button",{onClick:r,children:"edit"}),Object(D.jsxs)("div",{children:[Object(D.jsx)(h.a,{variant:"subtitle1",children:"Full name:"}),Object(D.jsx)(h.a,{variant:"subtitle2",children:t.fullName})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)(h.a,{variant:"subtitle1",children:"Looking for a job:"}),Object(D.jsx)(h.a,{variant:"subtitle2",children:t.lookingForAJob?"yes":"no"})]}),t.lookingForAJob&&Object(D.jsxs)("div",{children:[Object(D.jsx)(h.a,{variant:"subtitle1",children:"My professional skills:"}),Object(D.jsx)(h.a,{variant:"subtitle2",children:t.lookingForAJobDescription})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)(h.a,{variant:"subtitle1",children:"About me:"}),Object(D.jsx)(h.a,{variant:"subtitle2",children:t.aboutMe})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)(h.a,{variant:"subtitle1",children:"Contacts:"}),Object.keys(t.contacts).map((function(e){return Object(D.jsx)(qe,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},qe=function(e){var t=e.contactTitle,n=e.contactValue;return Object(D.jsxs)("div",{children:[Object(D.jsxs)(h.a,{variant:"subtitle1",children:[t,": "]}),n]})},Ze=n(20),Ye=function(e){return K.get("profile/".concat(e)).then((function(e){return e.data}))},Xe=function(e){return K.get("profile/status/".concat(e)).then((function(e){return e.data}))},Ke=function(e){return K.put("profile/status",{status:e}).then((function(e){return e.data}))},$e=function(e){var t=new FormData;return t.append("image",e),K.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},Qe=function(e){return K.put("profile",e).then((function(e){return e.data}))},et={posts:[{id:1,message:"Hi, how are you?",likesCount:11},{id:2,message:"It's my first post",likesCount:22}],profile:null,status:"",newPostText:""},tt={addPost:function(e){return{type:"ADD_POST",newPostText:e}},setUserProfile:function(e){return{type:"SET_USER_PROFILE",profile:e}},setStatus:function(e){return{type:"SET_STATUS",status:e}},deletePost:function(e){return{type:"DELETE_POST",postId:e}},savePhotoSuccess:function(e){return{type:"SAVE_PHOTO_SUCCESS",photos:e}}},nt=function(e){return function(){var t=Object(Y.a)(Z.a.mark((function t(n){var r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye(e);case 2:r=t.sent,n(tt.setUserProfile(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},rt=n(240),at=n(241),ct=Object(j.a)((function(e){return{info:{marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(2)},content:{display:"flex",flexDirection:"column"},img:{height:"100px",borderRadius:"50%",marginBottom:e.spacing(1)}}})),st=function(e){var t=e.message,n=e.likesCount,r=Object(w.a)(),a=ct(r);return Object(D.jsx)(rt.a,{className:a.info,children:Object(D.jsxs)(at.a,{className:a.content,children:[Object(D.jsx)("img",{className:a.img,src:Be.a,alt:"avatar"}),Object(D.jsxs)("div",{children:[Object(D.jsx)(h.a,{variant:"body1",align:"center",children:t}),Object(D.jsxs)(h.a,{variant:"body2",align:"left",children:["like: ",n]})]})]})})},it=n(110),ot=Object(j.a)((function(e){return{title:{marginBottom:e.spacing(1)}}})),ut=function(e){var t=e.posts,n=e.addPost,r=Object(w.a)(),a=ot(r);return Object(D.jsxs)("div",{children:[Object(D.jsx)(rt.a,{children:Object(D.jsxs)(at.a,{children:[Object(D.jsx)(h.a,{className:a.title,variant:"h5",children:"My Posts"}),Object(D.jsx)(it.b,{sendMessage:n})]})}),Object(D.jsx)("div",{children:t.map((function(e){return Object(D.jsx)(st,{message:e.message,likesCount:e.likesCount},e.id)}))})]})},lt={addPost:tt.addPost},jt=Object(H.b)((function(e){return{posts:e.profilePage.posts}}),lt)((function(e){var t=e.posts,n=e.addPost;return Object(D.jsx)(ut,{posts:t,addPost:n})})),dt=n(97),bt=Object(j.a)((function(e){return{info:{margin:e.spacing(2),padding:e.spacing(2)},paper:{margin:e.spacing(2)}}})),Ot=function(e){var t=e.profile,n=e.status,r=e.updateUserStatus,a=e.isOwner,c=e.savePhoto,s=e.saveProfile,i=Object(w.a)(),o=bt(i);return t?Object(D.jsxs)(De.a,{container:!0,children:[Object(D.jsx)(De.a,{item:!0,children:Object(D.jsx)(dt.a,{className:o.info,children:Object(D.jsx)(Ve,{profile:t,status:n,updateUserStatus:r,isOwner:a,savePhoto:c,saveProfile:s})})}),Object(D.jsx)(De.a,{item:!0,className:o.paper,children:Object(D.jsx)(jt,{})})]}):Object(D.jsx)(Pe,{})},ht={getUserProfile:nt,getUserStatus:function(e){return function(){var t=Object(Y.a)(Z.a.mark((function t(n){var r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe(e);case 2:r=t.sent,n(tt.setStatus(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(Y.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ke(e);case 2:0===t.sent.resultCode&&n(tt.setStatus(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(Y.a)(Z.a.mark((function t(n){var r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$e(e);case 2:0===(r=t.sent).resultCode&&n(tt.savePhotoSuccess(r.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(Y.a)(Z.a.mark((function t(n,r){var a,c;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.userId,t.next=3,Qe(e);case 3:if(0!==(c=t.sent).resultCode){t.next=13;break}if(null===a){t.next=10;break}return t.next=8,n(nt(a));case 8:t.next=11;break;case 10:throw new Error("userId can't be null");case 11:t.next=14;break;case 13:return t.abrupt("return",Promise.reject(c.messages));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},ft=Object(H.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId}}),ht)((function(e){var t=e.profile,n=e.status,r=e.authorizedUserId,a=e.getUserProfile,s=e.getUserStatus,i=e.updateUserStatus,o=e.savePhoto,u=e.saveProfile,j=Object(l.h)().userId||r||16528;return Object(c.useEffect)((function(){a(+j),s(+j)}),[s,a,j]),Object(D.jsx)(Ot,{profile:t,status:n,updateUserStatus:i,isOwner:j===r,savePhoto:o,saveProfile:u})})),pt=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(m.a)(Object(m.a)({},e),r):e}))},gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return K.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===r?"":"&friend=".concat(r))).then((function(e){return e.data}))},xt=function(e){return K.post("follow/".concat(e)).then((function(e){return e.data}))},mt=function(e){return K.delete("follow/".concat(e)).then((function(e){return e.data}))},vt={users:[],pageSize:100,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[],filter:{term:"",friend:null}},wt=function(e){return{type:"FOLLOW",userId:e}},St=function(e){return{type:"UNFOLLOW",userId:e}},yt=function(e){return{type:"SET_USERS",users:e}},Ct=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},kt=function(e){return{type:"SET_FILTER",payload:e}},Pt=function(e){return{type:"SET_TOTAL_USERS_COUNT",totalUsersCount:e}},Et=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},It=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},Tt=function(){var e=Object(Y.a)(Z.a.mark((function e(t,n,r,a){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(It(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(a(n)),t(It(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),_t=n(128),Ut=n.n(_t),Ft=n(131),At=n.n(Ft),Nt=n(130),Mt=n.n(Nt),Lt=n(129),Rt=n.n(Lt),Dt=Object(j.a)({root:{display:"flex"}}),zt=function(e){var t=e.totalItemsCount,n=e.pageSize,r=e.currentPage,a=e.onPageChanged,s=e.portionSize,i=void 0===s?10:s,o=Object(c.useState)(1),l=Object(u.a)(o,2),j=l[0],d=l[1],b=Dt(),h=Math.ceil(t/n),p=Array.from({length:h},(function(e,t){return t+1})),g=Math.ceil(h/i),x=(j-1)*i+1,m=j*i;return Object(D.jsxs)("div",{className:b.root,children:[j>1&&Object(D.jsxs)("div",{children:[Object(D.jsx)(O.a,{onClick:function(){d(1)},children:Object(D.jsx)(Ut.a,{})}),Object(D.jsx)(O.a,{onClick:function(){d(j-1)},children:Object(D.jsx)(Rt.a,{})})]}),p.filter((function(e){return e>=x&&e<=m})).map((function(e){return e===r?Object(D.jsx)(f.a,{variant:"outlined",onClick:function(){return a(e)},children:e},e):Object(D.jsx)(f.a,{onClick:function(){return a(e)},children:e},e)})),g>j&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(O.a,{onClick:function(){d(j+1)},children:Object(D.jsx)(Mt.a,{})}),Object(D.jsx)(O.a,{onClick:function(){d(g)},children:Object(D.jsx)(At.a,{})})]})]})},Gt=n(51),Bt=n(245),Wt=n(243),Jt=n(244),Vt=Object(j.a)({root:{width:270,height:370,margin:"8px"},media:{height:"200px"}}),Ht=function(e){var t=e.user,n=e.followingInProgress,r=e.follow,a=e.unfollow,c=Vt();return Object(D.jsx)(De.a,{item:!0,children:Object(D.jsxs)(rt.a,{className:c.root,children:[Object(D.jsxs)(Wt.a,{component:Gt.b,to:"/profile/".concat(t.id),children:[Object(D.jsx)(Jt.a,{className:c.media,image:t.photos.large?t.photos.large:Be.a,title:t.name}),Object(D.jsxs)(at.a,{children:[Object(D.jsxs)(h.a,{noWrap:!0,gutterBottom:!0,variant:"h6",component:"h2",children:["Name:",Object(D.jsx)("br",{}),t.name]}),Object(D.jsxs)(h.a,{noWrap:!0,variant:"body2",color:"textSecondary",component:"p",children:["Status: ",t.status||"No status"]})]})]}),Object(D.jsx)(Bt.a,{children:t.followed?Object(D.jsx)(f.a,{variant:"contained",fullWidth:!0,size:"small",disabled:n.some((function(e){return e===t.id})),onClick:function(){return a(t.id)},children:"Unfollow"}):Object(D.jsx)(f.a,{variant:"contained",fullWidth:!0,size:"small",disabled:n.some((function(e){return e===t.id})),onClick:function(){return r(t.id)},children:"Follow"})})]})})},qt=n(250),Zt=n(246),Yt=n(132),Xt=n.n(Yt),Kt=n(14),$t=Object(j.a)((function(e){return{root:{margin:e.spacing(2)},select:{width:141},search:Object(x.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Kt.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Kt.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(x.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}})),Qt=function(e){return{}},en=function(e){var t=e.onFilterChanged,n=$t(Object(w.a)());return Object(D.jsx)("div",{className:n.root,children:Object(D.jsx)(Oe.c,{initialValues:{term:"",friend:"null"},onSubmit:function(e,n){var r=n.setSubmitting,a={term:e.term,friend:"null"===e.friend?null:"true"===e.friend};t(a),r(!1)},validate:Qt,children:function(e){var t=e.values,r=(e.errors,e.touched,e.handleChange),a=e.handleBlur,c=(e.handleSubmit,e.isSubmitting);return Object(D.jsx)(Oe.b,{children:Object(D.jsxs)("div",{className:n.search,children:[Object(D.jsx)("div",{className:n.searchIcon,children:Object(D.jsx)(Xt.a,{})}),Object(D.jsx)(Oe.a,{component:qt.a,placeholder:"Search\u2026",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},id:"term",onChange:r,onBlur:a,value:t.term}),Object(D.jsxs)(Oe.a,{className:n.select,component:he.a,type:"text",name:"friend",variant:"standard",children:[Object(D.jsx)(Zt.a,{value:"null",children:"All"}),Object(D.jsx)(Zt.a,{value:"true",children:"Only followed"}),Object(D.jsx)(Zt.a,{value:"false",children:"Only unfollowed"})]}),Object(D.jsx)(f.a,{type:"submit",disabled:c,children:"Submit"})]})})}})})},tn=Object(j.a)({root:{flexDirection:"column",alignItems:"center",flexWrap:"wrap"},cards:{margin:20,display:"flex",flexWrap:"wrap",justifyContent:"center"}}),nn=s.a.memo((function(e){var t=e.totalUsersCount,n=e.pageSize,r=e.currentPage,a=e.onPageChanged,c=e.follow,s=e.unfollow,i=e.users,o=e.followingInProgress,u=e.onFilterChanged,l=tn();return Object(D.jsxs)(De.a,{container:!0,className:l.root,children:[Object(D.jsx)(De.a,{item:!0,children:Object(D.jsx)(en,{onFilterChanged:u})}),Object(D.jsx)(De.a,{item:!0,children:Object(D.jsx)(zt,{totalItemsCount:t,pageSize:n,currentPage:r,onPageChanged:a})}),Object(D.jsx)(De.a,{item:!0,className:l.cards,children:i.map((function(e,t){return Object(D.jsx)(Ht,{user:e,followingInProgress:o,follow:c,unfollow:s},t)}))})]})})),rn=n(133),an=Object(rn.a)((function(e){return e.usersPage.users}),(function(e){return e})),cn={follow:function(e){return function(){var t=Object(Y.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tt(n,e,xt,wt);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(Y.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tt(n,e,mt,St);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUsersThunkCreator:function(e,t,n){return function(){var r=Object(Y.a)(Z.a.mark((function r(a){var c;return Z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(Et(!0)),a(Ct(e)),a(kt(n)),r.next=5,gt(e,t,n.term,n.friend);case 5:c=r.sent,a(Et(!1)),a(yt(c.items)),a(Pt(c.totalCount));case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},sn=Object(H.b)((function(e){return{users:an(e),pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress,filter:e.usersPage.filter}}),cn)((function(e){var t=e.follow,n=e.unfollow,r=e.users,a=e.pageSize,s=e.totalUsersCount,i=e.currentPage,o=e.isFetching,u=e.followingInProgress,l=e.getUsersThunkCreator,j=e.filter;Object(c.useEffect)((function(){l(i,a,j)}),[i,l,a,j]);return Object(D.jsxs)(D.Fragment,{children:[o?Object(D.jsx)(Pe,{}):void 0,Object(D.jsx)(nn,{totalUsersCount:s,pageSize:a,currentPage:i,onPageChanged:function(e){l(e,a,j)},follow:t,unfollow:n,users:r,followingInProgress:u,onFilterChanged:function(e){l(1,a,e)}})]})}));var on,un=(on=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,252))})),function(e){return Object(D.jsx)(s.a.Suspense,{fallback:Object(D.jsx)(Pe,{}),children:Object(D.jsx)(on,Object(m.a)({},e))})}),ln={initializeApp:function(){return function(){var e=Object(Y.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(se()).then((function(){t(Ce())}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},jn=Object(H.b)((function(e){return{initialized:e.app.initialized}}),ln)((function(e){var t=e.initialized,n=e.initializeApp,r=Object(c.useState)(!0),a=Object(u.a)(r,2),s=a[0],i=a[1];Object(c.useEffect)((function(){n()}),[n]);var o=Object(ze.a)({palette:{type:s?"dark":"light",primary:{main:"#FFFFFFFF"},secondary:{main:"#000000FF"}}}),j=Object(D.jsx)("div",{className:"app-wrapper",children:Object(D.jsx)(Pe,{})});return t?Object(D.jsxs)(Le.a,{theme:o,children:[Object(D.jsx)(Re.a,{}),Object(D.jsx)(De.a,{container:!0,direction:"column",children:Object(D.jsxs)(Me,{children:[Object(D.jsx)(De.a,{item:!0,children:Object(D.jsx)(Se,{darkMode:s,setDarkMode:i})}),Object(D.jsx)(De.a,{item:!0,style:{margin:56,padding:24},children:Object(D.jsx)(c.Suspense,{fallback:j,children:Object(D.jsxs)(l.d,{children:[Object(D.jsx)(l.b,{path:"/",exact:!0,component:Te}),Object(D.jsx)(l.b,{path:"/profile/:userId?",component:ft}),Object(D.jsx)(l.b,{path:"/dialogs",component:un}),Object(D.jsx)(l.b,{path:"/users",component:sn}),Object(D.jsx)(l.b,{component:_e})]})})})]})})]}):j})),dn=n(72),bn=n(111),On=n(134),hn=Object(dn.b)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var n={id:5,message:t.newPostText,likesCount:0};return Object(m.a)(Object(m.a)({},e),{},{posts:[].concat(Object(Ze.a)(e.posts),[n])});case"SET_USER_PROFILE":return Object(m.a)(Object(m.a)({},e),{},{profile:t.profile});case"SET_STATUS":return Object(m.a)(Object(m.a)({},e),{},{status:t.status});case"DELETE_POST":return Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case"SAVE_PHOTO_SUCCESS":return Object(m.a)(Object(m.a)({},e),{},{profile:Object(m.a)(Object(m.a)({},e.profile),{},{photos:t.photos})});default:return e}},dialogsPage:bn.b,usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(m.a)(Object(m.a)({},e),{},{users:pt(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(m.a)(Object(m.a)({},e),{},{users:pt(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(m.a)(Object(m.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(m.a)(Object(m.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(m.a)(Object(m.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(m.a)(Object(m.a)({},e),{},{isFetching:t.isFetching});case"SET_FILTER":return Object(m.a)(Object(m.a)({},e),{},{filter:t.payload});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(m.a)(Object(m.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(Ze.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":case"GET_CAPTCHA_URL_SUCCESS":return Object(m.a)(Object(m.a)({},e),t.payload);case"SET_ERROR_LOGIN":return Object(m.a)(Object(m.a)({},e),{},{errorMessage:t.errorMessage});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(m.a)(Object(m.a)({},e),{},{initialized:!0});default:return e}}}),fn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||dn.c,pn=Object(dn.d)(hn,fn(Object(dn.a)(On.a)));o.a.render(Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(Gt.a,{basename:"/social_network",children:Object(D.jsx)(H.a,{store:pn,children:Object(D.jsx)(jn,{})})})}),document.getElementById("root"))},35:function(e,t,n){"use strict";t.a=n.p+"static/media/avatar.4084d3ab.svg"}},[[186,1,2]]]);
//# sourceMappingURL=main.3b715e22.chunk.js.map